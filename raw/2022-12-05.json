[{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/3cef/96dc/949_large.png?m=1614702882","name":"nas","avatar_normal":"https://cdn.v2ex.com/navatar/3cef/96dc/949_normal.png?m=1614702882","title":"NAS","url":"https://www.v2ex.com/go/nas","topics":826,"footer":"","header":"关于网络存储设备的讨论","title_alternative":"NAS","avatar_mini":"https://cdn.v2ex.com/navatar/3cef/96dc/949_mini.png?m=1614702882","stars":1244,"aliases":[],"root":false,"id":949,"parent_node_name":"hardware"},"member":{"id":69588,"username":"YAFEIML","url":"https://www.v2ex.com/u/YAFEIML","website":"","twitter":null,"psn":null,"github":null,"btc":null,"location":"","tagline":"","bio":"","avatar_mini":"https://cdn.v2ex.com/avatar/3df9/57ba/69588_mini.png?m=1661906159","avatar_normal":"https://cdn.v2ex.com/avatar/3df9/57ba/69588_normal.png?m=1661906159","avatar_large":"https://cdn.v2ex.com/avatar/3df9/57ba/69588_large.png?m=1661906159","created":1406900562,"last_modified":1661906159},"last_reply_by":"Maboroshii","last_touched":1670204592,"title":"NAS 伴侣，电费不便宜，能省一点是一点吧","url":"https://www.v2ex.com/t/900105","created":1670202788,"deleted":0,"content":"NAS 服务器很好，品牌的太贵，自组 NAS 性价比高，windows 又好用，但是谁也不会 24 小时使用（我不玩 PT ），一直开着就太浪费电了，毕竟每小时有 50w 呢。\r\n一开始写了个脚本来控制 NAS 睡眠，但是不怎么方便，就学了几天 C#趁着疫情又肝了一段时间做出了这么一个小玩意（感谢 GOOGLE 和各路 c#大神）。\r\n界面预览\r\nhttps://postimg.cc/jLn4d0Vw\r\nhttps://postimg.cc/v1brz44f\r\n具体功能：\r\n添加到 IP 列表内的 IP 如果在线（ ping 返回），那么 NAS 不睡眠\r\n添加到进程列表的程序如果在运行，那么 NAS 不睡眠\r\n可以通过开关控制单独监控 IP 或进程。（写到这儿的时候突然发现这块逻辑有问题，又完善了下）\r\n闲置逻辑并非是 5 分钟间隔检查一次进程或 IP ，而是通过刷新 IP 或进程存在时间来判断。\r\n\r\n通过 WoLWake 唤醒 NAS 配合操作更舒服，我的方案是 openwrt 配合 sh 脚本来判断唤醒，比如投影 IP 上线，那么就唤醒 NAS ，建议 NAS 使用睡眠方式，这样唤醒非常快，大概 3~5 秒内就通了。\r\n\r\nhttps://pan.baidu.com/s/1WPm2lAPsABl3ornMqu53Zg?pwd=weh5\r\n提取码: weh5\r\n\r\n升级计划：\r\n注册为服务运行，windows 不登录也可以进行睡眠等操作。\r\n会加入端口检测，比如某台设备不在 IP 名单，但是访问了 SMB 服务，那么 NAS 也会保持运行，不进行睡眠。\r\n考虑接入配合硬件进行唤醒，比如接入智能家居实现语音唤醒等。\r\n\r\n如使用中发现任何 BUG ，欢迎回复，一定修复。\r\n注意：需要.net framework 4.8 框架","content_rendered":"NAS 服务器很好，品牌的太贵，自组 NAS 性价比高，windows 又好用，但是谁也不会 24 小时使用（我不玩 PT ），一直开着就太浪费电了，毕竟每小时有 50w 呢。<br />一开始写了个脚本来控制 NAS 睡眠，但是不怎么方便，就学了几天 C#趁着疫情又肝了一段时间做出了这么一个小玩意（感谢 GOOGLE 和各路 c#大神）。<br />界面预览<br /><a target=\"_blank\" href=\"https://postimg.cc/jLn4d0Vw\" rel=\"nofollow noopener\">https://postimg.cc/jLn4d0Vw</a><br /><a target=\"_blank\" href=\"https://postimg.cc/v1brz44f\" rel=\"nofollow noopener\">https://postimg.cc/v1brz44f</a><br />具体功能：<br />添加到 IP 列表内的 IP 如果在线（ ping 返回），那么 NAS 不睡眠<br />添加到进程列表的程序如果在运行，那么 NAS 不睡眠<br />可以通过开关控制单独监控 IP 或进程。（写到这儿的时候突然发现这块逻辑有问题，又完善了下）<br />闲置逻辑并非是 5 分钟间隔检查一次进程或 IP ，而是通过刷新 IP 或进程存在时间来判断。<br /><br />通过 WoLWake 唤醒 NAS 配合操作更舒服，我的方案是 openwrt 配合 sh 脚本来判断唤醒，比如投影 IP 上线，那么就唤醒 NAS ，建议 NAS 使用睡眠方式，这样唤醒非常快，大概 3~5 秒内就通了。<br /><br /><a target=\"_blank\" href=\"https://pan.baidu.com/s/1WPm2lAPsABl3ornMqu53Zg?pwd=weh5\" rel=\"nofollow noopener\">https://pan.baidu.com/s/1WPm2lAPsABl3ornMqu53Zg?pwd=weh5</a><br />提取码: weh5<br /><br />升级计划：<br />注册为服务运行，windows 不登录也可以进行睡眠等操作。<br />会加入端口检测，比如某台设备不在 IP 名单，但是访问了 SMB 服务，那么 NAS 也会保持运行，不进行睡眠。<br />考虑接入配合硬件进行唤醒，比如接入智能家居实现语音唤醒等。<br /><br />如使用中发现任何 BUG ，欢迎回复，一定修复。<br />注意：<a target=\"_blank\" href=\"http://需要.net\" rel=\"nofollow noopener\">需要.net</a> framework 4.8 框架","last_modified":1670202835,"replies":18,"id":900105},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/3636/6388/169_large.png?m=1586499345","name":"appletv","avatar_normal":"https://cdn.v2ex.com/navatar/3636/6388/169_normal.png?m=1586499345","title":"Apple TV","url":"https://www.v2ex.com/go/appletv","topics":116,"footer":"","header":"","title_alternative":"Apple TV","avatar_mini":"https://cdn.v2ex.com/navatar/3636/6388/169_mini.png?m=1586499345","stars":170,"aliases":[],"root":false,"id":169,"parent_node_name":"apple"},"member":{"id":300592,"username":"jiazhixin","url":"https://www.v2ex.com/u/jiazhixin","website":"","twitter":"JasonJia333","psn":"","github":"","btc":"","location":"天津","tagline":"","bio":"","avatar_mini":"https://cdn.v2ex.com/avatar/131b/be6c/300592_mini.png?m=1521163564","avatar_normal":"https://cdn.v2ex.com/avatar/131b/be6c/300592_normal.png?m=1521163564","avatar_large":"https://cdn.v2ex.com/avatar/131b/be6c/300592_large.png?m=1521163564","created":1521163323,"last_modified":1521163564},"last_reply_by":"xiaoxiaotian","last_touched":1670204343,"title":"Infuse Pro 永久版","url":"https://www.v2ex.com/t/900100","created":1670200805,"deleted":0,"content":"请问有需要的么？通过 Trakt 共享！ 6 车位自用一个！每车位 100RMB ！需要自己先注册 Trakt 账号！换设备前需要把 Trakt 账号在旧设备注销再在新设备登录！避免无故把车友挤掉！唯一麻烦的就是需要 10 天重新在我的设备登陆一次你的 Trakt 账号！有需要的联系个资里的联系方式！","content_rendered":"<p>请问有需要的么？通过 Trakt 共享！ 6 车位自用一个！每车位 100RMB ！需要自己先注册 Trakt 账号！换设备前需要把 Trakt 账号在旧设备注销再在新设备登录！避免无故把车友挤掉！唯一麻烦的就是需要 10 天重新在我的设备登陆一次你的 Trakt 账号！有需要的联系个资里的联系方式！</p>\n","last_modified":1670200805,"replies":14,"id":900100}]