[{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1629391393","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1629391393","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":182128,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1629391393","stars":3433,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"id":469082,"username":"LeeReamond","url":"https://www.v2ex.com/u/LeeReamond","website":null,"twitter":null,"psn":null,"github":null,"btc":null,"location":null,"tagline":null,"bio":null,"avatar_mini":"https://cdn.v2ex.com/avatar/f481/5f03/469082_mini.png?m=1621264130","avatar_normal":"https://cdn.v2ex.com/avatar/f481/5f03/469082_normal.png?m=1621264130","avatar_large":"https://cdn.v2ex.com/avatar/f481/5f03/469082_large.png?m=1621264130","created":1581577538,"last_modified":1621264130},"last_reply_by":"kingjpa","last_touched":1646532739,"title":"有关前端使用 JS 生成音频指纹指代浏览器唯一用户，是否存在不稳定的问题","url":"https://www.v2ex.com/t/838308","created":1646532074,"deleted":0,"content":"如题，近期需求对匿名用户进行追踪，需要对身份进行唯一标记，前天发帖询问短哈希后楼内老哥提到可以使用 canvas 指纹代表用户。我搜索相关内容后如同打开了新世界的大门，头一次知道还有这种标记用户身份的方法。进而搜索得知音频设备也可以用来生成指纹，但是百度博客相关文章提到音频可能导致指纹不稳定（同设备多次执行结果不同），原文地址：[https://blog.csdn.net/cen_cs/article/details/106341724]( https://blog.csdn.net/cen_cs/article/details/106341724)\r\n\r\n我复现过程中未遇到此问题，想请问有无论坛老哥遇到过类似问题，或者这个不稳定问题纯粹是写这篇博客的老哥乱扯的？\r\n\r\n======\r\n\r\n另外问一下有关 js 写法，查到的音频指纹生成代码的伪代码类似下述\r\n```\r\nvar AudioContext = ... // 链接音频设备\r\nvar context = new AudioContext(...) // 生成一段音频\r\n... // 配置音频内容\r\ncontext.oncomplete = function (event) {\r\n   ...\r\n   console.log(fingerprint) // 在音频生成完毕后触发回调，计算并输出音频指纹\r\n}\r\n```\r\n考虑到使用中为了便捷调用，理想的情况希望将整个功能写在同一个函数里，即\r\n```\r\nlet get_audio_fingerprint = () => {...};\r\nlet device_fingerprint = get_canvas_fingerprint() + get_audio_fingerprint(); // 类似这种调用方法\r\n```\r\n但是如上述伪代码中指纹生成是在回调函数里完成的，应该怎么把这个回调函数的结果返回给外层呢？试了试 promise ，但是得到浏览器提示说内层不允许调用 promise","content_rendered":"<p>如题，近期需求对匿名用户进行追踪，需要对身份进行唯一标记，前天发帖询问短哈希后楼内老哥提到可以使用 canvas 指纹代表用户。我搜索相关内容后如同打开了新世界的大门，头一次知道还有这种标记用户身份的方法。进而搜索得知音频设备也可以用来生成指纹，但是百度博客相关文章提到音频可能导致指纹不稳定（同设备多次执行结果不同），原文地址：<a href=\"https://blog.csdn.net/cen_cs/article/details/106341724\" rel=\"nofollow\">https://blog.csdn.net/cen_cs/article/details/106341724</a></p>\n<p>我复现过程中未遇到此问题，想请问有无论坛老哥遇到过类似问题，或者这个不稳定问题纯粹是写这篇博客的老哥乱扯的？</p>\n<p>======</p>\n<p>另外问一下有关 js 写法，查到的音频指纹生成代码的伪代码类似下述</p>\n<pre><code>var AudioContext = ... // 链接音频设备\nvar context = new AudioContext(...) // 生成一段音频\n... // 配置音频内容\ncontext.oncomplete = function (event) {\n   ...\n   console.log(fingerprint) // 在音频生成完毕后触发回调，计算并输出音频指纹\n}\n</code></pre>\n<p>考虑到使用中为了便捷调用，理想的情况希望将整个功能写在同一个函数里，即</p>\n<pre><code>let get_audio_fingerprint = () =&gt; {...};\nlet device_fingerprint = get_canvas_fingerprint() + get_audio_fingerprint(); // 类似这种调用方法\n</code></pre>\n<p>但是如上述伪代码中指纹生成是在回调函数里完成的，应该怎么把这个回调函数的结果返回给外层呢？试了试 promise ，但是得到浏览器提示说内层不允许调用 promise</p>\n","last_modified":1646532482,"replies":7,"id":838308}]