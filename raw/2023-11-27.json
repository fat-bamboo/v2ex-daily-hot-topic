[{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c9f0/f895/8_large.png?m=1630643991","name":"iphone","avatar_normal":"https://cdn.v2ex.com/navatar/c9f0/f895/8_normal.png?m=1630643991","title":"iPhone","url":"https://www.v2ex.com/go/iphone","topics":10948,"footer":"这里绝不讨论如何获得 iPhone 盗版软件、iTunes 黑卡之类。","header":"Say hello to the future.","title_alternative":"iPhone","avatar_mini":"https://cdn.v2ex.com/navatar/c9f0/f895/8_mini.png?m=1630643991","stars":3275,"aliases":[],"root":false,"id":8,"parent_node_name":"apple"},"member":{"id":372600,"username":"lakie","url":"https://www.v2ex.com/u/lakie","website":"","twitter":null,"psn":null,"github":null,"btc":null,"location":"","tagline":"","bio":"","avatar_mini":"https://cdn.v2ex.com/avatar/eee8/e44b/372600_mini.png?m=1665035904","avatar_normal":"https://cdn.v2ex.com/avatar/eee8/e44b/372600_normal.png?m=1665035904","avatar_large":"https://cdn.v2ex.com/avatar/eee8/e44b/372600_large.png?m=1665035904","created":1545650995,"last_modified":1665035904},"last_reply_by":"Roykira","last_touched":1701047275,"title":"重置了 iPhone ，之前的一些应用能装回来吗？求解！","url":"https://www.v2ex.com/t/995400","created":1701043903,"deleted":0,"content":"重置了，然后 icloud 恢复，但是有几个应用提示下架了，无法安装，现在只剩图标，怎么解决呢？\r\n我记得之前重置可以装的，还是记错了。现在重置恢复怎么也自动升级最新的版本了？\r\n以前重置恢复是当时手机软件的版本，现在自动更新最新了。\r\n是苹果改了什么规则还是我哪里点错了？","content_rendered":"重置了，然后 icloud 恢复，但是有几个应用提示下架了，无法安装，现在只剩图标，怎么解决呢？<br />我记得之前重置可以装的，还是记错了。现在重置恢复怎么也自动升级最新的版本了？<br />以前重置恢复是当时手机软件的版本，现在自动更新最新了。<br />是苹果改了什么规则还是我哪里点错了？","last_modified":1701044685,"replies":12,"id":995400},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/8d31/7bdc/747_large.png?m=1523201604","name":"deals","avatar_normal":"https://cdn.v2ex.com/navatar/8d31/7bdc/747_normal.png?m=1523201604","title":"优惠信息","url":"https://www.v2ex.com/go/deals","topics":2279,"footer":"","header":"这里分享和发布来自互联网上的最新优惠信息","title_alternative":"Deals","avatar_mini":"https://cdn.v2ex.com/navatar/8d31/7bdc/747_mini.png?m=1523201604","stars":3294,"aliases":[],"root":false,"id":747,"parent_node_name":"life"},"member":{"id":320781,"username":"bankroft","url":"https://www.v2ex.com/u/bankroft","website":"https://www.bankroft.cn","twitter":"","psn":"","github":"","btc":"","location":"","tagline":"","bio":"","avatar_mini":"https://cdn.v2ex.com/avatar/92ef/a155/320781_mini.png?m=1695198878","avatar_normal":"https://cdn.v2ex.com/avatar/92ef/a155/320781_normal.png?m=1695198878","avatar_large":"https://cdn.v2ex.com/avatar/92ef/a155/320781_large.png?m=1695198878","created":1528242359,"last_modified":1695198878},"last_reply_by":"stopWorking","last_touched":1701048014,"title":"云闪付 app store 充值有优惠","url":"https://www.v2ex.com/t/995401","created":1701044630,"deleted":0,"content":"首页进云闪付商城，然后最上面的 banner 写的 app store 充值卡","content_rendered":"首页进云闪付商城，然后最上面的 banner 写的 app store 充值卡","last_modified":1701044630,"replies":9,"id":995401},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/e0c6/4119/421_large.png?m=1586514183","name":"db","avatar_normal":"https://cdn.v2ex.com/navatar/e0c6/4119/421_normal.png?m=1586514183","title":"数据库","url":"https://www.v2ex.com/go/db","topics":939,"footer":"","header":"","title_alternative":"Database","avatar_mini":"https://cdn.v2ex.com/navatar/e0c6/4119/421_mini.png?m=1586514183","stars":669,"aliases":[],"root":false,"id":421,"parent_node_name":"computer"},"member":{"id":664172,"username":"qee","url":"https://www.v2ex.com/u/qee","website":null,"twitter":null,"psn":null,"github":null,"btc":null,"location":null,"tagline":null,"bio":null,"avatar_mini":"https://cdn.v2ex.com/gravatar/20305481846549acbcf36ce58b124035?s=24&d=retro","avatar_normal":"https://cdn.v2ex.com/gravatar/20305481846549acbcf36ce58b124035?s=48&d=retro","avatar_large":"https://cdn.v2ex.com/gravatar/20305481846549acbcf36ce58b124035?s=73&d=retro","created":1700815812,"last_modified":1700815812},"last_reply_by":"so2back","last_touched":1701047438,"title":"jdbc 执行批量 update 的效率问题","url":"https://www.v2ex.com/t/995403","created":1701045533,"deleted":0,"content":"最近客户要对数据库存储的数据做国密改造，提供了相关的加密 sdk ，原来的数据库表存储的数据要升级成密文。\r\n现在就想用原生的 jdbc 读出数据原文加密后存再进去，但是执行 batchexecute()的方法一次 1000 条，发现巨慢，按我查到都是推荐批量更新，但我这个就是巨慢。然后搞了测试表，结构里的索引什么的都删了还是慢。\r\n数据库情况：postgre ，单表有 100+W 的数据，加密更新四五个字段\r\n代码大致： \r\n\r\n        connection.setAutoCommit(false);\r\n        PreparedStatement preparedStatement = connection.prepareStatement(\"update users set name = ? where id = ?\");\r\n\r\n\t\tfor(int =i;i<res.length;i<1000){\r\n        \tpreparedStatement.setString(1, \"John\");\r\n        \tpreparedStatement.setInt(2, 1);\r\n        \tpreparedStatement.batchadd()\r\n        }\r\n        \r\n\r\n        preparedStatement.executeBatch();\r\n        connection.commit();\r\n        \r\n\r\n这个哪位有好的优化思路吗，或者别的方案","content_rendered":"<p>最近客户要对数据库存储的数据做国密改造，提供了相关的加密 sdk ，原来的数据库表存储的数据要升级成密文。\n现在就想用原生的 jdbc 读出数据原文加密后存再进去，但是执行 batchexecute()的方法一次 1000 条，发现巨慢，按我查到都是推荐批量更新，但我这个就是巨慢。然后搞了测试表，结构里的索引什么的都删了还是慢。\n数据库情况：postgre ，单表有 100+W 的数据，加密更新四五个字段\n代码大致： </p>\n<pre><code>    connection.setAutoCommit(false);\n    PreparedStatement preparedStatement = connection.prepareStatement(\"update users set name = ? where id = ?\");\n\n\tfor(int =i;i&lt;res.length;i&lt;1000){\n    \tpreparedStatement.setString(1, \"John\");\n    \tpreparedStatement.setInt(2, 1);\n    \tpreparedStatement.batchadd()\n    }\n    \n\n    preparedStatement.executeBatch();\n    connection.commit();\n    \n</code></pre>\n<p>这个哪位有好的优化思路吗，或者别的方案</p>\n","last_modified":1701045861,"replies":7,"id":995403}]