[{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_large.png?m=1607656854","name":"macos","avatar_normal":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_normal.png?m=1607656854","title":"macOS","url":"https://www.v2ex.com/go/macos","topics":17031,"footer":"<a href=\"/mbp\">MacBook Pro</a> 及 <a href=\"/go/imac\">iMac</a> 等 <a href=\"/go/apple\">Apple</a> 公司设计的计算机所运行的操作系统。<a href=\"/go/idev\">iOS</a> 的基础。","header":"The world’s most advanced desktop operating system.","title_alternative":"macOS","avatar_mini":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_mini.png?m=1607656854","stars":4388,"aliases":[],"root":false,"id":22,"parent_node_name":"os"},"member":{"username":"azur","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/9943e734f1648137a18cc4d6cb0c3509?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/azur","tagline":null,"twitter":null,"created":1588987848,"avatar_large":"https://cdn.v2ex.com/gravatar/9943e734f1648137a18cc4d6cb0c3509?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/9943e734f1648137a18cc4d6cb0c3509?s=24&d=retro","location":null,"btc":null,"id":488483},"last_reply_by":"NeoChen","last_touched":1631169265,"title":"发布会前，求大神分析下 MacOS 和 win11 的优劣势","url":"https://www.v2ex.com/t/800773","created":1631157072,"content":"现在自己使用的是公司笔记本，win11 系统。笔记本比较老旧，速度凑合，配合 wsl 、utools 、onequick，多桌面和快捷键还是非常顺手的，但是发热严重。\r\n\r\n比较心水 m1 加持的 air 无风扇，无 touchbar，感觉对程序员 16+512 应该完全够用，价格相对 pro 也更加便宜。\r\n\r\n但是昨天看到帖子：[既用 MacOS 又用 Windows 的朋友，我对任务栏有点困惑，想了解一下你们是怎么解决的]( https://v2ex.com/t/800648#reply60)，感觉自己心水的是 m1 的强大，macos 似乎并不如 win11 好用\r\n\r\n加上昨天 B 站看了一个视频，教你如何在 mac 下分屏，更是绝望。在 win 下不就是左右拖动一下的事情么，mac 下需要一个几分钟的视频教程\r\n\r\n所以求大神分析下，对于程序员（ java 、python 、go ），考虑 M1 或者 M1X 的强大，是否有上 mac 的必要，系统的优劣势在哪，还是说幻 16 、r9000x 这种 windows 本更香","content_rendered":"<p>现在自己使用的是公司笔记本，win11 系统。笔记本比较老旧，速度凑合，配合 wsl 、utools 、onequick，多桌面和快捷键还是非常顺手的，但是发热严重。</p>\n<p>比较心水 m1 加持的 air 无风扇，无 touchbar，感觉对程序员 16+512 应该完全够用，价格相对 pro 也更加便宜。</p>\n<p>但是昨天看到帖子：<a href=\"https://v2ex.com/t/800648#reply60\" rel=\"nofollow\">既用 MacOS 又用 Windows 的朋友，我对任务栏有点困惑，想了解一下你们是怎么解决的</a>，感觉自己心水的是 m1 的强大，macos 似乎并不如 win11 好用</p>\n<p>加上昨天 B 站看了一个视频，教你如何在 mac 下分屏，更是绝望。在 win 下不就是左右拖动一下的事情么，mac 下需要一个几分钟的视频教程</p>\n<p>所以求大神分析下，对于程序员（ java 、python 、go ），考虑 M1 或者 M1X 的强大，是否有上 mac 的必要，系统的优劣势在哪，还是说幻 16 、r9000x 这种 windows 本更香</p>\n","last_modified":1631157072,"replies":54,"id":800773},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/57ae/ee35/229_large.png?m=1448883313","name":"en","avatar_normal":"https://cdn.v2ex.com/navatar/57ae/ee35/229_normal.png?m=1448883313","title":"English","url":"https://www.v2ex.com/go/en","topics":171,"footer":"","header":"英语学习及使用问题讨论。","title_alternative":"English","avatar_mini":"https://cdn.v2ex.com/navatar/57ae/ee35/229_mini.png?m=1448883313","stars":190,"aliases":[],"root":false,"id":229,"parent_node_name":""},"member":{"username":"RunningDurian","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/4b4f/9306/513769_mini.png?m=1625728305","bio":null,"url":"https://www.v2ex.com/u/RunningDurian","tagline":null,"twitter":null,"created":1603245925,"avatar_large":"https://cdn.v2ex.com/avatar/4b4f/9306/513769_mini.png?m=1625728305","avatar_mini":"https://cdn.v2ex.com/avatar/4b4f/9306/513769_mini.png?m=1625728305","location":null,"btc":null,"id":513769},"last_reply_by":"RRRoger","last_touched":1631169145,"title":"程序员想提高英语 进外企，大家有什么 英语学习方法推荐吗？谢谢了","url":"https://www.v2ex.com/t/800746","created":1631151810,"content":"本人 程序员小 C，在一个规模 200 人左右的公司打工。但是公司做的是制造业。感觉前景 很渺茫，没有很大的发展。公司没啥盈利。想走了，但是我这个地方没啥好的公司。就像去 外企做个程序员。但是英语需要 很高的水平。想问问大家，该怎么学习英语，特别着急。。谢谢大伙。当社畜好累","content_rendered":"<p>本人 程序员小 C，在一个规模 200 人左右的公司打工。但是公司做的是制造业。感觉前景 很渺茫，没有很大的发展。公司没啥盈利。想走了，但是我这个地方没啥好的公司。就像去 外企做个程序员。但是英语需要 很高的水平。想问问大家，该怎么学习英语，特别着急。。谢谢大伙。当社畜好累</p>\n","last_modified":1631153657,"replies":39,"id":800746},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c9e1/074f/104_large.png?m=1625081793","name":"cloud","avatar_normal":"https://cdn.v2ex.com/navatar/c9e1/074f/104_normal.png?m=1625081793","title":"云计算","url":"https://www.v2ex.com/go/cloud","topics":4526,"footer":"","header":"关于云计算技术和平台的综合讨论区。","title_alternative":"Cloud Computing","avatar_mini":"https://cdn.v2ex.com/navatar/c9e1/074f/104_mini.png?m=1625081793","stars":2722,"aliases":[],"root":false,"id":104,"parent_node_name":"webmaster"},"member":{"username":"jasondennis12139","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/c0d156bdc802ad1e5b7890e903e620d8?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/jasondennis12139","tagline":null,"twitter":null,"created":1606876692,"avatar_large":"https://cdn.v2ex.com/gravatar/c0d156bdc802ad1e5b7890e903e620d8?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/c0d156bdc802ad1e5b7890e903e620d8?s=24&d=retro","location":null,"btc":null,"id":521719},"last_reply_by":"allanpk716","last_touched":1631169069,"title":"AdGuard Home 搭在腾讯云上，一天被封·······","url":"https://www.v2ex.com/t/800740","created":1631150059,"content":"害，真的难搞，搭在腾讯云上一天就被封了\r\n还有解封的希望么？","content_rendered":"<p>害，真的难搞，搭在腾讯云上一天就被封了\n还有解封的希望么？</p>\n","last_modified":1631150619,"replies":35,"id":800740},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/03af/dbd6/63_large.png?m=1627823094","name":"java","avatar_normal":"https://cdn.v2ex.com/navatar/03af/dbd6/63_normal.png?m=1627823094","title":"Java","url":"https://www.v2ex.com/go/java","topics":4578,"footer":"","header":"The most popular programming language.","title_alternative":"Java","avatar_mini":"https://cdn.v2ex.com/navatar/03af/dbd6/63_mini.png?m=1627823094","stars":4623,"aliases":[],"root":false,"id":63,"parent_node_name":"programming"},"member":{"username":"teliang","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/cd15/3421/455199_mini.png?m=1631168866","bio":"","url":"https://www.v2ex.com/u/teliang","tagline":"","twitter":"","created":1574626564,"avatar_large":"https://cdn.v2ex.com/avatar/cd15/3421/455199_mini.png?m=1631168866","avatar_mini":"https://cdn.v2ex.com/avatar/cd15/3421/455199_mini.png?m=1631168866","location":"深圳","btc":"","id":455199},"last_reply_by":"snownarrow","last_touched":1631170152,"title":"记录一个诡异的线上宕机事故，大佬们帮忙排查一下问题呀","url":"https://www.v2ex.com/t/800791","created":1631159294,"content":"## 环境\r\n\r\n二三十个微服务 SpringBoot+Dubbo 部署在阿里的 K8S 上，数据库也是买的阿里的 RDS，听领导说配置还挺高的，支持主备自动切换什么的。\r\n\r\n## 事故起因和经过\r\n\r\n大版本上线，改了用户的缓存数据结构，凌晨上线时把 Redis 用户缓存全清了，上线当晚验证功能正常，白天运行也十分稳定。\r\n\r\n下午 5 点多业务高峰的时候运营反馈系统蹦了，看后台是数据库负载正常、Dubbo 调用全部超时，领导首先怀疑是系统被攻击了，然后在阿里的后台打开了防火墙增强模式（具体叫什么不懂，效果是可以阻拦大部分到 Nginx 的请求），开完观察了好久后台调用还是超时，老板都开始炸锅了跑来了解情况，领导开始尝试万能的重启大法，ZK 的三个节点都重启了，微服务也挨个重启，绝望的是重启依然没有任何效果。\r\n\r\n一顿瞎搞时间很快就到了晚上 8 点，这时候已经宕机 2 个多小时了还没找到原因，也不知道怎么恢复。然后我试着用\r\nArthas 监控了一下调用时间，发现主要业务流量入口 M 服务调用 Cache 服务一直超时，调用 C 主要是 M 从 Redis 获取不到用户缓存，需要 C 构建缓存放 Redis 。监控 C 服务的时候发现所有请求数据库的耗时都要 2000ms 以上，然后我们构建缓存需要读 8~9 次数据库但是 Dubbo 的超时时间设的是 10s 所以一直超时。\r\n\r\n## 诡异事件\r\n\r\n首先怀疑是 SQL 写的有问题，但是有一个根据主键 ID 查询单表的居然也要 2000+ms，这就非常离谱了，后面我把参数打出来自己拼接 SQL 用 Navicat 查询只要十几毫秒，领导说可能是工具监控有问题，然后当场给这个查询加调用时间的日志验证，从 master 拉的分支，只加了一行日志！！！\r\n\r\n然后，重新发包观察，诡异的是，系统恢复正常了！！！没有调用超时的日志，新加的那行日志打印出来的也是十几毫秒，其他服务也能正常调用了！！！\r\n\r\n## 事故报告\r\n\r\n领导给的事故报告是晚上清除用户缓存，没有预先跑脚本构建缓存导致业务高峰期系统宕机。\r\n\r\n## 疑惑\r\n\r\n为什么那个时间点 Navicat 和微服务查询同一条 SQL 时间差这么多？然后加了行日志系统又自动恢复了？诡异，太诡异了，说没有鬼我是不信的\r\n\r\n大佬们来帮忙排查一下这可能是什么原因呀","content_rendered":"<h2>环境</h2>\n<p>二三十个微服务 SpringBoot+Dubbo 部署在阿里的 K8S 上，数据库也是买的阿里的 RDS，听领导说配置还挺高的，支持主备自动切换什么的。</p>\n<h2>事故起因和经过</h2>\n<p>大版本上线，改了用户的缓存数据结构，凌晨上线时把 Redis 用户缓存全清了，上线当晚验证功能正常，白天运行也十分稳定。</p>\n<p>下午 5 点多业务高峰的时候运营反馈系统蹦了，看后台是数据库负载正常、Dubbo 调用全部超时，领导首先怀疑是系统被攻击了，然后在阿里的后台打开了防火墙增强模式（具体叫什么不懂，效果是可以阻拦大部分到 Nginx 的请求），开完观察了好久后台调用还是超时，老板都开始炸锅了跑来了解情况，领导开始尝试万能的重启大法，ZK 的三个节点都重启了，微服务也挨个重启，绝望的是重启依然没有任何效果。</p>\n<p>一顿瞎搞时间很快就到了晚上 8 点，这时候已经宕机 2 个多小时了还没找到原因，也不知道怎么恢复。然后我试着用\nArthas 监控了一下调用时间，发现主要业务流量入口 M 服务调用 Cache 服务一直超时，调用 C 主要是 M 从 Redis 获取不到用户缓存，需要 C 构建缓存放 Redis 。监控 C 服务的时候发现所有请求数据库的耗时都要 2000ms 以上，然后我们构建缓存需要读 8~9 次数据库但是 Dubbo 的超时时间设的是 10s 所以一直超时。</p>\n<h2>诡异事件</h2>\n<p>首先怀疑是 SQL 写的有问题，但是有一个根据主键 ID 查询单表的居然也要 2000+ms，这就非常离谱了，后面我把参数打出来自己拼接 SQL 用 Navicat 查询只要十几毫秒，领导说可能是工具监控有问题，然后当场给这个查询加调用时间的日志验证，从 master 拉的分支，只加了一行日志！！！</p>\n<p>然后，重新发包观察，诡异的是，系统恢复正常了！！！没有调用超时的日志，新加的那行日志打印出来的也是十几毫秒，其他服务也能正常调用了！！！</p>\n<h2>事故报告</h2>\n<p>领导给的事故报告是晚上清除用户缓存，没有预先跑脚本构建缓存导致业务高峰期系统宕机。</p>\n<h2>疑惑</h2>\n<p>为什么那个时间点 Navicat 和微服务查询同一条 SQL 时间差这么多？然后加了行日志系统又自动恢复了？诡异，太诡异了，说没有鬼我是不信的</p>\n<p>大佬们来帮忙排查一下这可能是什么原因呀</p>\n","last_modified":1631159294,"replies":27,"id":800791},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1629391393","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1629391393","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":176298,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1629391393","stars":3310,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"JKeita","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/b9e1/a537/208378_mini.png?m=1625557254","bio":"","url":"https://www.v2ex.com/u/JKeita","tagline":"","twitter":"","created":1483059554,"avatar_large":"https://cdn.v2ex.com/avatar/b9e1/a537/208378_mini.png?m=1625557254","avatar_mini":"https://cdn.v2ex.com/avatar/b9e1/a537/208378_mini.png?m=1625557254","location":"","btc":"","id":208378},"last_reply_by":"j717273419","last_touched":1631163758,"title":"桌面端应用调用 HTML 登录页是怎么实现的。","url":"https://www.v2ex.com/t/800756","created":1631153498,"content":"需求是编写 dll 能够弹出一个 web 登录页面并且进行回调；\r\n\r\n微软有一个 webview2 但是兼容性不好，依赖 edge 。\r\n\r\n最好是使用 golang 编写 dll，然后调用 html 页面的实现。","content_rendered":"<p>需求是编写 dll 能够弹出一个 web 登录页面并且进行回调；</p>\n<p>微软有一个 webview2 但是兼容性不好，依赖 edge 。</p>\n<p>最好是使用 golang 编写 dll，然后调用 html 页面的实现。</p>\n","last_modified":1631153498,"replies":26,"id":800756},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/2387/337b/1005_large.png?m=1579006175","name":"csharp","avatar_normal":"https://cdn.v2ex.com/navatar/2387/337b/1005_normal.png?m=1579006175","title":"C#","url":"https://www.v2ex.com/go/csharp","topics":139,"footer":"","header":"","title_alternative":"C#","avatar_mini":"https://cdn.v2ex.com/navatar/2387/337b/1005_mini.png?m=1579006175","stars":498,"aliases":[],"root":false,"id":1005,"parent_node_name":"programming"},"member":{"username":"KageroY","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/4722/7ff8/524962_mini.png?m=1608563956","bio":null,"url":"https://www.v2ex.com/u/KageroY","tagline":null,"twitter":null,"created":1608562856,"avatar_large":"https://cdn.v2ex.com/avatar/4722/7ff8/524962_mini.png?m=1608563956","avatar_mini":"https://cdn.v2ex.com/avatar/4722/7ff8/524962_mini.png?m=1608563956","location":null,"btc":null,"id":524962},"last_reply_by":"catcn","last_touched":1631157769,"title":"VScode 配置 c 语言环境求助","url":"https://www.v2ex.com/t/800734","created":1631147358,"content":"csdn 上的博客看了个遍，还是没搞好，那三个配置文件怎么弄呢？请各位大佬指点！😉","content_rendered":"csdn 上的博客看了个遍，还是没搞好，那三个配置文件怎么弄呢？请各位大佬指点！😉","last_modified":1631147358,"replies":22,"id":800734},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1630643913","name":"apple","avatar_normal":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1630643913","title":"Apple","url":"https://www.v2ex.com/go/apple","topics":15730,"footer":"","header":"设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。","title_alternative":"Apple","avatar_mini":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1630643913","stars":1915,"aliases":[],"root":false,"id":184,"parent_node_name":"hardware"},"member":{"username":"volvo007","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/fe03df4711802704179677d82138d566?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/volvo007","tagline":null,"twitter":null,"created":1591417715,"avatar_large":"https://cdn.v2ex.com/gravatar/fe03df4711802704179677d82138d566?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/fe03df4711802704179677d82138d566?s=24&d=retro","location":null,"btc":null,"id":493517},"last_reply_by":"AckywOw","last_touched":1631170386,"title":"Anker 的雷电 4 dock 最近打折","url":"https://www.v2ex.com/t/800810","created":1631165720,"content":"主要是什么 99 抢购节，天猫狗东又打起来了。原价 1999 的这个雷电 4dock，一般售价 14xx，现在拿完各种券+优惠，只要 9xx 就能拿下。\n\n太香了没忍住搞了个\n\n这个 dock 属于“轻量”产品，接口上是没有 caldigit 丰富的，没有 sd 、视频口、光纤音频…… 另外充电头暴大……有相关需求的慎选","content_rendered":"<p>主要是什么 99 抢购节，天猫狗东又打起来了。原价 1999 的这个雷电 4dock，一般售价 14xx，现在拿完各种券+优惠，只要 9xx 就能拿下。</p>\n<p>太香了没忍住搞了个</p>\n<p>这个 dock 属于“轻量”产品，接口上是没有 caldigit 丰富的，没有 sd 、视频口、光纤音频…… 另外充电头暴大……有相关需求的慎选</p>\n","last_modified":1631165720,"replies":15,"id":800810},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/58e4/d44e/948_large.png?m=1476942117","name":"pixel","avatar_normal":"https://cdn.v2ex.com/navatar/58e4/d44e/948_normal.png?m=1476942117","title":"Pixel","url":"https://www.v2ex.com/go/pixel","topics":117,"footer":"","header":"Made by Google","title_alternative":"Pixel","avatar_mini":"https://cdn.v2ex.com/navatar/58e4/d44e/948_mini.png?m=1476942117","stars":190,"aliases":[],"root":false,"id":948,"parent_node_name":"android"},"member":{"username":"hucheng518","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/b0ab785256d287ba04b88eab485734b7?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/hucheng518","tagline":"","twitter":null,"created":1492093445,"avatar_large":"https://cdn.v2ex.com/gravatar/b0ab785256d287ba04b88eab485734b7?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/b0ab785256d287ba04b88eab485734b7?s=24&d=retro","location":"","btc":null,"id":225931},"last_reply_by":"Singge","last_touched":1631170160,"title":"pixel 5a 到手，还不错","url":"https://www.v2ex.com/t/800788","created":1631158694,"content":"","content_rendered":"","last_modified":1631158694,"replies":15,"id":800788},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/74bb/a227/938_large.png?m=1591791660","name":"gts","avatar_normal":"https://cdn.v2ex.com/navatar/74bb/a227/938_normal.png?m=1591791660","title":"全球工单系统","url":"https://www.v2ex.com/go/gts","topics":8450,"footer":"","header":"希望这里能够为你遇到的问题找到解决方案","title_alternative":"Global Ticket System","avatar_mini":"https://cdn.v2ex.com/navatar/74bb/a227/938_mini.png?m=1591791660","stars":1624,"aliases":[],"root":false,"id":938,"parent_node_name":"geek"},"member":{"username":"gainsurier","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/7f9d/d067/156062_mini.png?m=1481548285","bio":"","url":"https://www.v2ex.com/u/gainsurier","tagline":"","twitter":"","created":1453192704,"avatar_large":"https://cdn.v2ex.com/avatar/7f9d/d067/156062_mini.png?m=1481548285","avatar_mini":"https://cdn.v2ex.com/avatar/7f9d/d067/156062_mini.png?m=1481548285","location":"","btc":"","id":156062},"last_reply_by":"gainsurier","last_touched":1631167587,"title":"百度网盘没法安装在 Program Files，提醒系统权限限制","url":"https://www.v2ex.com/t/800771","created":1631156645,"content":"PC 端的产品经理能不能有点职业道德？约束一下自己.......\r\n\r\nhttps://i.v2ex.co/ECcGlDcO.png","content_rendered":"PC 端的产品经理能不能有点职业道德？约束一下自己.......<br /><br /><a target=\"_blank\" href=\"/i/ECcGlDcO.png\" rel=\"nofollow noopener\" target=\"_blank\" title=\"在新窗口打开图片 ECcGlDcO.png\"><img src=\"//i.v2ex.co/ECcGlDcO.png\" class=\"embedded_image\"></a>","last_modified":1631157061,"replies":14,"id":800771},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1629391393","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1629391393","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":176301,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1629391393","stars":3310,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"jonathanchoo","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/6201/c031/504933_mini.png?m=1602724415","bio":null,"url":"https://www.v2ex.com/u/jonathanchoo","tagline":null,"twitter":null,"created":1598074826,"avatar_large":"https://cdn.v2ex.com/avatar/6201/c031/504933_mini.png?m=1602724415","avatar_mini":"https://cdn.v2ex.com/avatar/6201/c031/504933_mini.png?m=1602724415","location":null,"btc":null,"id":504933},"last_reply_by":"ys0290","last_touched":1631165887,"title":"为什么 EPROM/EEPROM 都可擦写了还叫只读存储器？","url":"https://www.v2ex.com/t/800767","created":1631156173,"content":"","content_rendered":"","last_modified":1631156173,"replies":14,"id":800767},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1629391393","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1629391393","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":176307,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1629391393","stars":3311,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"iHaoo","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/ff81/d351/378645_mini.png?m=1596530052","bio":null,"url":"https://www.v2ex.com/u/iHaoo","tagline":null,"twitter":null,"created":1547898537,"avatar_large":"https://cdn.v2ex.com/avatar/ff81/d351/378645_mini.png?m=1596530052","avatar_mini":"https://cdn.v2ex.com/avatar/ff81/d351/378645_mini.png?m=1596530052","location":null,"btc":null,"id":378645},"last_reply_by":"fkdtz","last_touched":1631169485,"title":"[求救] pycharm 长时间未响应然后强制退出了，跑了两天的实验结果在 console 中再打开就没了，还能找回吗?","url":"https://www.v2ex.com/t/800805","created":1631164951,"content":"mac 用 pycharm 连接服务器跑了几个模型，之前都是在 pycharm 底部的 python console 中输出信息和结果，今天一早 pycharm 一直未响应，等了好久只能强制退出了，再打开结果也没了，console 一片空白，请问还有补救的余地吗，求求了~~~","content_rendered":"<p>mac 用 pycharm 连接服务器跑了几个模型，之前都是在 pycharm 底部的 python console 中输出信息和结果，今天一早 pycharm 一直未响应，等了好久只能强制退出了，再打开结果也没了，console 一片空白，请问还有补救的余地吗，求求了~~~</p>\n","last_modified":1631164951,"replies":12,"id":800805},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_large.png?m=1630512279","name":"programmer","avatar_normal":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_normal.png?m=1630512279","title":"程序员","url":"https://www.v2ex.com/go/programmer","topics":45633,"footer":"","header":"While code monkeys are not eating bananas, they're coding.","title_alternative":"Programmer","avatar_mini":"https://cdn.v2ex.com/navatar/94f6/d7e0/300_mini.png?m=1630512279","stars":7507,"aliases":[],"root":false,"id":300,"parent_node_name":"computer"},"member":{"username":"felix021","website":"http://www.felix021.com","github":"felix021","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/ac0d/7b02/30753_mini.png?m=1588869191","bio":"","url":"https://www.v2ex.com/u/felix021","tagline":"静坐常思己过，闲谈莫论人非。","twitter":"","created":1355754362,"avatar_large":"https://cdn.v2ex.com/avatar/ac0d/7b02/30753_mini.png?m=1588869191","avatar_mini":"https://cdn.v2ex.com/avatar/ac0d/7b02/30753_mini.png?m=1588869191","location":"上海","btc":"","id":30753},"last_reply_by":"kidlj","last_touched":1631165352,"title":"单元测试 ——「简单」的乐趣","url":"https://www.v2ex.com/t/800759","created":1631153867,"content":"![]( https://image-static.segmentfault.com/219/330/2193306574-6138e9cb99ed7)\r\n\r\n\r\n# 忍受简单的能力\r\n\r\n知乎大 V 李松蔚讲了个和女儿互动的故事，很有意思：\r\n\r\n> 我关上灯，对女儿说：「闭上眼睛，别乱动了。」 \r\n>\r\n> 女儿立刻大声抗议：「可是我睡不着！」 \r\n>\r\n> 我只好又强调了一遍：「我只是请你闭上眼睛，别乱动。」\r\n>\r\n> -- 李松蔚 《[忍受简单的能力]( https://mp.weixin.qq.com/s/jsLN0ApNkDJSi-wOkrKSIw)》\r\n\r\n他并没有要求女儿「尽快睡着」，而是做了个更简单的要求；但是聪明的女儿立刻联想到了「即使闭上眼睛现在也睡不着」并做出抗议。\r\n\r\n在这篇文章里，他说：「对于聪明人来说，最难以忍受的情况不是一件事有多难，而是纯粹的简单」，「没有难度挑战的任务，会让他们感到无所着力」，「重复的练习是他们的死穴」。\r\n\r\n---\r\n\r\n# 单元测试\r\n\r\n单元测试似乎就是一种「简单而重复」的过程，不论是看起来还是写起来，都是由一大堆 GIVEN - WHEN - THEN 组成。\r\n\r\n但是这「简单」的表象之下，隐藏着两个「简单」却很重要的问题：\r\n\r\n1. 为什么要写单测？\r\n2. 如何写好单测？\r\n\r\n按照套路，接下来应该先说「为什么要写单测」，但是太套路就有点无聊，所以咱们先聊聊「如何写好单测」。\r\n\r\n\r\n# 面条式代码\r\n\r\n所谓面条式代码（ spaghetti code ），是说某段代码和意大利面（不是通心粉）一样。\r\n\r\n反正不是什么好话。\r\n\r\n最近看到这么一段代码，功能是创建某个月的值班记录：\r\n\r\n```\r\ndef onduty(names):\r\n  date = datetime.strptime(\"2021-07-01\", \"%Y-%m-%d\")\r\n  idx = 0\r\n  while date < datetime.strptime(\"2021-07-31\", \"%Y-%m-%d\"):\r\n    post_data = {\r\n      \"date\": date.strftime(\"%Y-%m-%d\"),\r\n      \"name\": names[idx],\r\n      \"backup\": names[(idx+1)%len(names)],\r\n    }\r\n    requests.post(API_URL, json=post_data)\r\n    idx = (idx + 1) % len(names)\r\n    date += timedelta(days=1)\r\n```\r\n\r\n注：原代码有 60 行，这里略作简化。\r\n\r\n这是一段典型的「逻辑很齐全，但是 un 单测 able 」的代码：\r\n\r\n* 需要请求外部系统（核心原因）\r\n* 硬编码了时间段（次要问题）\r\n\r\n那么应该如何为它写单测呢？\r\n\r\n---\r\n\r\n# 重构\r\n\r\n> 如果一段代码不好写单测，说明它的代码结构有问题。\r\n>\r\n> -- 鲁迅《我没说过这句话》\r\n\r\n对于结构有问题的代码，首先要做的显然是重构。\r\n\r\n我们首先关注这段代码的主要问题：调用「 requests.post 」请求了外部系统，这导致它和外部系统耦合在一起。\r\n\r\n一个很容易想到的思路是，通过依赖注入的方式来解耦：\r\n\r\n```\r\ndef onduty(names, saver)\r\n  ...\r\n  saver(post_data)\r\n  ...\r\n```\r\n\r\n这样简单的改造以后，它就变成了一段「单测 able 」的代码了：通过 mock 一个 saver，我们可以采集并校验它的输出，例如\r\n\r\n```\r\nclass Saver(object):\r\n  def __init__(self):\r\n    self.output = []\r\n  def mocker(self):\r\n    def f(post_data):\r\n      self.output.append(post_data)\r\n    return f\r\n    \r\ndef test():\r\n  f = Saver()\r\n  onduty(['a', 'b', 'c'], f.mocker())\r\n  check(f.output)\r\n```\r\n\r\n但是这样写出来的代码非常晦涩。更合理的方法是，将这段逻辑拆分成「生成值班列表」和「上报到值班系统」：\r\n\r\n```\r\ndef onduty(names):\r\n  arrangement = arrange(names)\r\n  register(arrangement)\r\n```\r\n\r\n然后我们就可以将「生成值班列表」实现成一个纯函数：\r\n\r\n```\r\ndef arrange(names):\r\n  arrangement = []\r\n  date = datetime.strptime(\"2021-07-01\", \"%Y-%m-%d\")\r\n  idx = 0\r\n  while date < datetime.strptime(\"2021-07-31\", \"%Y-%m-%d\"):\r\n    arrangement.append({\r\n      \"date\": date.strftime(\"%Y-%m-%d\"),\r\n      \"name\": names[idx],\r\n      \"backup\": names[(idx+1)%len(names)],\r\n    })\r\n    idx = (idx + 1) % len(names)\r\n    date += timedelta(days=1)\r\n  return arrangement\r\n```\r\n\r\n就像数学课上的 `y = f(x)`，不产生任何副作用，于是我们可以非常容易地给 `arrange` 方法写单测:\r\n\r\n```\r\ndef TestArrage():\r\n    // Given\r\n    names = ['a', 'b', 'c']\r\n    // When\r\n    arrangement = arrange(names)\r\n    // Then\r\n    check(arrangment)\r\n```\r\n\r\n「上报到值班系统」的实现就像这样：\r\n\r\n```\r\ndef register(arrangement):\r\n  for item in arrangement:\r\n    requests.post(API_URL, item)\r\n```\r\n\r\n因为涉及到外部系统，确实不太适合写单测，更适合用功能测试来保障其正确性。\r\n\r\n另外，因为在 `arrange` 里硬编码了两个日期，单测的校验逻辑会非常繁琐，我们可以再对其进行重构，把日期作为参数输入：\r\n\r\n```\r\ndef arrange(names, from_date, to_date):\r\n  ...\r\n```\r\n\r\n这样使得代码的职责更明确，不但可以提高这段代码的复用性，还可以对更特别的 case （例如大小月、闰年等）做校验。\r\n\r\n\r\n小结一下：\r\n\r\n* 通过重构来提高代码的「单测 ability 」\r\n* 通过依赖注入来解决对外部的依赖 ——「面向接口编程」\r\n* 通过拆分不同环节的业务逻辑，进一步提高代码的内聚性\r\n* 通过将硬编码的值参数化，提高代码的可复用性\r\n\r\n当然，以上只是一个简单的例子，并不是完整的单测方法论。实践中还有很多其他环节需要考虑：\r\n\r\n* 选择合适的单测框架（例如 JUnit ）\r\n* 如何使用 mock 工具 /库来提高覆盖率\r\n* 如何在语句覆盖、分支覆盖、条件覆盖之间做权衡\r\n* 如何结合 CI 工具、使用单测覆盖率来评估代码质量\r\n* ……\r\n\r\n感兴趣的同学可以参考腾讯技术工程的《[聊聊单元测试那些事儿]( https://mp.weixin.qq.com/s/DJ_cIV5ytA1TVuz5kd9BAA)》。\r\n\r\n---\r\n\r\n# 单测的好处\r\n\r\n通过上面的一番骚操作，我们已经看到了单测的好处：\r\n\r\n* 为了写单测，结构不好的代码必须被重构，从而提高了**代码的质量**。\r\n\r\n而比重构现有代码更重要的是：\r\n\r\n* 为了写单测，新增的代码也必须保证合理的结构，从而提高了**思维的质量**。\r\n\r\n当然，刚开始实践单测的同学可能会感受到，这降低了编码的速度；\r\n\r\n但是经过一段时间的**重复练习**，这种思维会被**内化**，自然地就能写出高质量的代码。\r\n\r\n在实践中，单测实际上也大幅提高了**测试的效率**。\r\n\r\n构造一个完整的测试往往是很耗时的，编译 1 分钟、启动 1 分钟，发个测试请求 1 秒钟，「性价比」很低（这可能是很多同学不喜欢测试的原因）。\r\n\r\n而单测只需要编译运行少部分代码，因此可以快速验证代码逻辑。\r\n\r\n由于大量代码 bug 在单测时就已经被发现并修复了，可以大幅减少后续 “修改 - 编译 - 启动 - 测试” 环节的数量，这也极大提高了整体的测试效率。\r\n\r\n在《聊聊单元测试那些事儿》里还有一份微软的数据：\r\n\r\n> 不同测试阶段发现 BUG 的平均耗时：\r\n> * 单元测试阶段，平均耗时 3.25 小时\r\n> * 集成测试阶段，平均耗时 6.25 小时 (+92%)\r\n> * 系统测试阶段，平均耗时 11.5 小时 (+254%)\r\n\r\n最近遇到的一个 case 也是很好的例子：手头项目多版本并行，我在 A 版本开发的功能，需要 merge 到 B 版本，merge 以后，跑了一轮 test case，就可以比较放心地说，merge 后的代码没有问题 ——\r\n\r\n![unit-test]( https://image-static.segmentfault.com/370/940/3709404695-6138ebf551e5a_fix732)\r\n\r\n同样地，当我们需要给一段代码添加新功能时，如果有存量的 unit test，我就可以比较放心地去修改它了。\r\n\r\n---\r\n\r\n# 结语\r\n\r\n在《忍受简单的能力》里，李松蔚说：\r\n\r\n> 所以我认识的学生里面，除了少部分天赋异禀的奇才之外，真正最影响一个人的成就的因素，可能不是智商，也不是努力，而在于他有多「踏实」。\r\n\r\n写高质量的代码，从踏实地写单测开始。\r\n\r\nbtw，李松蔚这篇文章实在太经典，我忍不住要再引用一段：\r\n\r\n> 一口一口地吃饭太慢了。恨不得一口吃下一百口，谁叫锅里还有那么多？\r\n> 所以重要的事情才要说三遍。可是上一段让你看了三遍的话是什么，你还记得吗？\r\n\r\n如果不记得的话，可以试试下面这句：\r\n\r\n加入**神策数据**，帮助客户实现数据驱动。\r\n\r\n加入**神策数据**，帮助客户实现数据驱动。\r\n\r\n加入**神策数据**，帮助客户实现数据驱动。\r\n\r\n神策数据是一家致力于“帮助三千万企业重构数据根基，实现数字化经营”的大数据公司。公司正在飞速发展，在北京、上海、武汉、成都、西安、合肥等地都有研发中心，后端、前端、客户端、QA 等岗位均虚位以待，对大数据感兴趣的同学千万不要错过 ——\r\n\r\n→ **[点此查看神策数据的所有职位]( https://app.mokahr.com/recommendation-apply/sensorsdata/2913?sharePageId=722194&recommenderId=1434845#/recommendation/page/722194)**\r\n\r\n\r\n\r\n---\r\n\r\n# 欢迎关注我的公众号\r\n\r\n\r\n```\r\n   ▄▄▄▄▄▄▄   ▄      ▄▄▄▄ ▄▄▄▄▄▄▄  \r\n   █ ▄▄▄ █ ▄▀ ▄ ▀██▄ ▀█▄ █ ▄▄▄ █  \r\n   █ ███ █  █  █  █▀▀▀█▀ █ ███ █  \r\n   █▄▄▄▄▄█ ▄ █▀█ █▀█ ▄▀█ █▄▄▄▄▄█  \r\n   ▄▄▄ ▄▄▄▄█  ▀▄█▀▀▀█ ▄█▄▄   ▄    \r\n   ▄█▄▄▄▄▄▀▄▀▄██   ▀ ▄  █▀▄▄▀▄▄█  \r\n   █ █▀▄▀▄▄▀▀█▄▀█▄▀█████▀█▀▀█ █▄  \r\n    ▀▀  █▄██▄█▀  █ ▀█▀ ▀█▀ ▄▀▀▄█  \r\n   █▀ ▀ ▄▄▄▄▄▄▀▄██  █ ▄████▀▀ █▄  \r\n   ▄▀▄▄▄ ▄ ▀▀▄████▀█▀  ▀ █▄▄▄▀▄█  \r\n   ▄▀▀██▄▄  █▀▄▀█▀▀ █▀ ▄▄▄██▀ ▀   \r\n   ▄▄▄▄▄▄▄ █ █▀ ▀▀   ▄██ ▄ █▄▀██  \r\n   █ ▄▄▄ █ █▄ ▀▄▀ ▀██  █▄▄▄█▄  ▀  \r\n   █ ███ █ ▄ ███▀▀▀█▄ █▀▄ ██▄ ▀█  \r\n   █▄▄▄▄▄█ ██ ▄█▀█  █ ▀██▄▄▄  █▄  \r\n```\r\n\r\n\r\n---\r\n\r\n# 参考链接\r\n\r\n1. [忍受简单的能力]( https://mp.weixin.qq.com/s/jsLN0ApNkDJSi-wOkrKSIw)\r\n2. [聊聊单元测试那些事儿]( https://mp.weixin.qq.com/s/DJ_cIV5ytA1TVuz5kd9BAA)","content_rendered":"<p><img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://image-static.segmentfault.com/219/330/2193306574-6138e9cb99ed7\"/></p>\n<h1>忍受简单的能力</h1>\n<p>知乎大 V 李松蔚讲了个和女儿互动的故事，很有意思：</p>\n<blockquote>\n<p>我关上灯，对女儿说：「闭上眼睛，别乱动了。」 </p>\n<p>女儿立刻大声抗议：「可是我睡不着！」 </p>\n<p>我只好又强调了一遍：「我只是请你闭上眼睛，别乱动。」</p>\n<p>-- 李松蔚 《<a href=\"https://mp.weixin.qq.com/s/jsLN0ApNkDJSi-wOkrKSIw\" rel=\"nofollow\">忍受简单的能力</a>》</p>\n</blockquote>\n<p>他并没有要求女儿「尽快睡着」，而是做了个更简单的要求；但是聪明的女儿立刻联想到了「即使闭上眼睛现在也睡不着」并做出抗议。</p>\n<p>在这篇文章里，他说：「对于聪明人来说，最难以忍受的情况不是一件事有多难，而是纯粹的简单」，「没有难度挑战的任务，会让他们感到无所着力」，「重复的练习是他们的死穴」。</p>\n<hr/>\n<h1>单元测试</h1>\n<p>单元测试似乎就是一种「简单而重复」的过程，不论是看起来还是写起来，都是由一大堆 GIVEN - WHEN - THEN 组成。</p>\n<p>但是这「简单」的表象之下，隐藏着两个「简单」却很重要的问题：</p>\n<ol>\n<li>为什么要写单测？</li>\n<li>如何写好单测？</li>\n</ol>\n<p>按照套路，接下来应该先说「为什么要写单测」，但是太套路就有点无聊，所以咱们先聊聊「如何写好单测」。</p>\n<h1>面条式代码</h1>\n<p>所谓面条式代码（ spaghetti code ），是说某段代码和意大利面（不是通心粉）一样。</p>\n<p>反正不是什么好话。</p>\n<p>最近看到这么一段代码，功能是创建某个月的值班记录：</p>\n<pre><code>def onduty(names):\n  date = datetime.strptime(\"2021-07-01\", \"%Y-%m-%d\")\n  idx = 0\n  while date &lt; datetime.strptime(\"2021-07-31\", \"%Y-%m-%d\"):\n    post_data = {\n      \"date\": date.strftime(\"%Y-%m-%d\"),\n      \"name\": names[idx],\n      \"backup\": names[(idx+1)%len(names)],\n    }\n    requests.post(API_URL, json=post_data)\n    idx = (idx + 1) % len(names)\n    date += timedelta(days=1)\n</code></pre>\n<p>注：原代码有 60 行，这里略作简化。</p>\n<p>这是一段典型的「逻辑很齐全，但是 un 单测 able 」的代码：</p>\n<ul>\n<li>需要请求外部系统（核心原因）</li>\n<li>硬编码了时间段（次要问题）</li>\n</ul>\n<p>那么应该如何为它写单测呢？</p>\n<hr/>\n<h1>重构</h1>\n<blockquote>\n<p>如果一段代码不好写单测，说明它的代码结构有问题。</p>\n<p>-- 鲁迅《我没说过这句话》</p>\n</blockquote>\n<p>对于结构有问题的代码，首先要做的显然是重构。</p>\n<p>我们首先关注这段代码的主要问题：调用「 <a href=\"http://requests.post\" rel=\"nofollow\">requests.post</a> 」请求了外部系统，这导致它和外部系统耦合在一起。</p>\n<p>一个很容易想到的思路是，通过依赖注入的方式来解耦：</p>\n<pre><code>def onduty(names, saver)\n  ...\n  saver(post_data)\n  ...\n</code></pre>\n<p>这样简单的改造以后，它就变成了一段「单测 able 」的代码了：通过 mock 一个 saver，我们可以采集并校验它的输出，例如</p>\n<pre><code>class Saver(object):\n  def __init__(self):\n    self.output = []\n  def mocker(self):\n    def f(post_data):\n      self.output.append(post_data)\n    return f\n    \ndef test():\n  f = Saver()\n  onduty(['a', 'b', 'c'], f.mocker())\n  check(f.output)\n</code></pre>\n<p>但是这样写出来的代码非常晦涩。更合理的方法是，将这段逻辑拆分成「生成值班列表」和「上报到值班系统」：</p>\n<pre><code>def onduty(names):\n  arrangement = arrange(names)\n  register(arrangement)\n</code></pre>\n<p>然后我们就可以将「生成值班列表」实现成一个纯函数：</p>\n<pre><code>def arrange(names):\n  arrangement = []\n  date = datetime.strptime(\"2021-07-01\", \"%Y-%m-%d\")\n  idx = 0\n  while date &lt; datetime.strptime(\"2021-07-31\", \"%Y-%m-%d\"):\n    arrangement.append({\n      \"date\": date.strftime(\"%Y-%m-%d\"),\n      \"name\": names[idx],\n      \"backup\": names[(idx+1)%len(names)],\n    })\n    idx = (idx + 1) % len(names)\n    date += timedelta(days=1)\n  return arrangement\n</code></pre>\n<p>就像数学课上的 <code>y = f(x)</code>，不产生任何副作用，于是我们可以非常容易地给 <code>arrange</code> 方法写单测:</p>\n<pre><code>def TestArrage():\n    // Given\n    names = ['a', 'b', 'c']\n    // When\n    arrangement = arrange(names)\n    // Then\n    check(arrangment)\n</code></pre>\n<p>「上报到值班系统」的实现就像这样：</p>\n<pre><code>def register(arrangement):\n  for item in arrangement:\n    requests.post(API_URL, item)\n</code></pre>\n<p>因为涉及到外部系统，确实不太适合写单测，更适合用功能测试来保障其正确性。</p>\n<p>另外，因为在 <code>arrange</code> 里硬编码了两个日期，单测的校验逻辑会非常繁琐，我们可以再对其进行重构，把日期作为参数输入：</p>\n<pre><code>def arrange(names, from_date, to_date):\n  ...\n</code></pre>\n<p>这样使得代码的职责更明确，不但可以提高这段代码的复用性，还可以对更特别的 case （例如大小月、闰年等）做校验。</p>\n<p>小结一下：</p>\n<ul>\n<li>通过重构来提高代码的「单测 ability 」</li>\n<li>通过依赖注入来解决对外部的依赖 ——「面向接口编程」</li>\n<li>通过拆分不同环节的业务逻辑，进一步提高代码的内聚性</li>\n<li>通过将硬编码的值参数化，提高代码的可复用性</li>\n</ul>\n<p>当然，以上只是一个简单的例子，并不是完整的单测方法论。实践中还有很多其他环节需要考虑：</p>\n<ul>\n<li>选择合适的单测框架（例如 JUnit ）</li>\n<li>如何使用 mock 工具 /库来提高覆盖率</li>\n<li>如何在语句覆盖、分支覆盖、条件覆盖之间做权衡</li>\n<li>如何结合 CI 工具、使用单测覆盖率来评估代码质量</li>\n<li>……</li>\n</ul>\n<p>感兴趣的同学可以参考腾讯技术工程的《<a href=\"https://mp.weixin.qq.com/s/DJ_cIV5ytA1TVuz5kd9BAA\" rel=\"nofollow\">聊聊单元测试那些事儿</a>》。</p>\n<hr/>\n<h1>单测的好处</h1>\n<p>通过上面的一番骚操作，我们已经看到了单测的好处：</p>\n<ul>\n<li>为了写单测，结构不好的代码必须被重构，从而提高了<strong>代码的质量</strong>。</li>\n</ul>\n<p>而比重构现有代码更重要的是：</p>\n<ul>\n<li>为了写单测，新增的代码也必须保证合理的结构，从而提高了<strong>思维的质量</strong>。</li>\n</ul>\n<p>当然，刚开始实践单测的同学可能会感受到，这降低了编码的速度；</p>\n<p>但是经过一段时间的<strong>重复练习</strong>，这种思维会被<strong>内化</strong>，自然地就能写出高质量的代码。</p>\n<p>在实践中，单测实际上也大幅提高了<strong>测试的效率</strong>。</p>\n<p>构造一个完整的测试往往是很耗时的，编译 1 分钟、启动 1 分钟，发个测试请求 1 秒钟，「性价比」很低（这可能是很多同学不喜欢测试的原因）。</p>\n<p>而单测只需要编译运行少部分代码，因此可以快速验证代码逻辑。</p>\n<p>由于大量代码 bug 在单测时就已经被发现并修复了，可以大幅减少后续 “修改 - 编译 - 启动 - 测试” 环节的数量，这也极大提高了整体的测试效率。</p>\n<p>在《聊聊单元测试那些事儿》里还有一份微软的数据：</p>\n<blockquote>\n<p>不同测试阶段发现 BUG 的平均耗时：</p>\n<ul>\n<li>单元测试阶段，平均耗时 3.25 小时</li>\n<li>集成测试阶段，平均耗时 6.25 小时 (+92%)</li>\n<li>系统测试阶段，平均耗时 11.5 小时 (+254%)</li>\n</ul>\n</blockquote>\n<p>最近遇到的一个 case 也是很好的例子：手头项目多版本并行，我在 A 版本开发的功能，需要 merge 到 B 版本，merge 以后，跑了一轮 test case，就可以比较放心地说，merge 后的代码没有问题 ——</p>\n<p><img alt=\"unit-test\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://image-static.segmentfault.com/370/940/3709404695-6138ebf551e5a_fix732\"/></p>\n<p>同样地，当我们需要给一段代码添加新功能时，如果有存量的 unit test，我就可以比较放心地去修改它了。</p>\n<hr/>\n<h1>结语</h1>\n<p>在《忍受简单的能力》里，李松蔚说：</p>\n<blockquote>\n<p>所以我认识的学生里面，除了少部分天赋异禀的奇才之外，真正最影响一个人的成就的因素，可能不是智商，也不是努力，而在于他有多「踏实」。</p>\n</blockquote>\n<p>写高质量的代码，从踏实地写单测开始。</p>\n<p>btw，李松蔚这篇文章实在太经典，我忍不住要再引用一段：</p>\n<blockquote>\n<p>一口一口地吃饭太慢了。恨不得一口吃下一百口，谁叫锅里还有那么多？\n所以重要的事情才要说三遍。可是上一段让你看了三遍的话是什么，你还记得吗？</p>\n</blockquote>\n<p>如果不记得的话，可以试试下面这句：</p>\n<p>加入<strong>神策数据</strong>，帮助客户实现数据驱动。</p>\n<p>加入<strong>神策数据</strong>，帮助客户实现数据驱动。</p>\n<p>加入<strong>神策数据</strong>，帮助客户实现数据驱动。</p>\n<p>神策数据是一家致力于“帮助三千万企业重构数据根基，实现数字化经营”的大数据公司。公司正在飞速发展，在北京、上海、武汉、成都、西安、合肥等地都有研发中心，后端、前端、客户端、QA 等岗位均虚位以待，对大数据感兴趣的同学千万不要错过 ——</p>\n<p>→ <strong><a href=\"https://app.mokahr.com/recommendation-apply/sensorsdata/2913?sharePageId=722194&amp;recommenderId=1434845#/recommendation/page/722194\" rel=\"nofollow\">点此查看神策数据的所有职位</a></strong></p>\n<hr/>\n<h1>欢迎关注我的公众号</h1>\n<pre><code>   ▄▄▄▄▄▄▄   ▄      ▄▄▄▄ ▄▄▄▄▄▄▄  \n   █ ▄▄▄ █ ▄▀ ▄ ▀██▄ ▀█▄ █ ▄▄▄ █  \n   █ ███ █  █  █  █▀▀▀█▀ █ ███ █  \n   █▄▄▄▄▄█ ▄ █▀█ █▀█ ▄▀█ █▄▄▄▄▄█  \n   ▄▄▄ ▄▄▄▄█  ▀▄█▀▀▀█ ▄█▄▄   ▄    \n   ▄█▄▄▄▄▄▀▄▀▄██   ▀ ▄  █▀▄▄▀▄▄█  \n   █ █▀▄▀▄▄▀▀█▄▀█▄▀█████▀█▀▀█ █▄  \n    ▀▀  █▄██▄█▀  █ ▀█▀ ▀█▀ ▄▀▀▄█  \n   █▀ ▀ ▄▄▄▄▄▄▀▄██  █ ▄████▀▀ █▄  \n   ▄▀▄▄▄ ▄ ▀▀▄████▀█▀  ▀ █▄▄▄▀▄█  \n   ▄▀▀██▄▄  █▀▄▀█▀▀ █▀ ▄▄▄██▀ ▀   \n   ▄▄▄▄▄▄▄ █ █▀ ▀▀   ▄██ ▄ █▄▀██  \n   █ ▄▄▄ █ █▄ ▀▄▀ ▀██  █▄▄▄█▄  ▀  \n   █ ███ █ ▄ ███▀▀▀█▄ █▀▄ ██▄ ▀█  \n   █▄▄▄▄▄█ ██ ▄█▀█  █ ▀██▄▄▄  █▄  \n</code></pre>\n<hr/>\n<h1>参考链接</h1>\n<ol>\n<li><a href=\"https://mp.weixin.qq.com/s/jsLN0ApNkDJSi-wOkrKSIw\" rel=\"nofollow\">忍受简单的能力</a></li>\n<li><a href=\"https://mp.weixin.qq.com/s/DJ_cIV5ytA1TVuz5kd9BAA\" rel=\"nofollow\">聊聊单元测试那些事儿</a></li>\n</ol>\n","last_modified":1631153980,"replies":11,"id":800759},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c9f0/f895/8_large.png?m=1630643991","name":"iphone","avatar_normal":"https://cdn.v2ex.com/navatar/c9f0/f895/8_normal.png?m=1630643991","title":"iPhone","url":"https://www.v2ex.com/go/iphone","topics":8695,"footer":"这里绝不讨论如何获得 iPhone 盗版软件、iTunes 黑卡之类。","header":"Say hello to the future.","title_alternative":"iPhone","avatar_mini":"https://cdn.v2ex.com/navatar/c9f0/f895/8_mini.png?m=1630643991","stars":2709,"aliases":[],"root":false,"id":8,"parent_node_name":"apple"},"member":{"username":"han365","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/d3d9/022e/22571_mini.png?m=1401716860","bio":null,"url":"https://www.v2ex.com/u/han365","tagline":null,"twitter":null,"created":1340513256,"avatar_large":"https://cdn.v2ex.com/avatar/d3d9/022e/22571_mini.png?m=1401716860","avatar_mini":"https://cdn.v2ex.com/avatar/d3d9/022e/22571_mini.png?m=1401716860","location":null,"btc":null,"id":22571},"last_reply_by":"745839","last_touched":1631169887,"title":"天才吧服务也一般般，苹果手机质量下降了。","url":"https://www.v2ex.com/t/800820","created":1631168793,"content":"iPhone11 刚刚过保，无拆无修。信号很差，去天才吧问过保要自费换机，这几天人脸识别也坏了。才一年多手机，我还不如用国产机两年 一换","content_rendered":"iPhone11 刚刚过保，无拆无修。信号很差，去天才吧问过保要自费换机，这几天人脸识别也坏了。才一年多手机，我还不如用国产机两年 一换","last_modified":1631168988,"replies":10,"id":800820},{"node":{"avatar_large":"/static/img/node_default_large.png","name":"bigdata","avatar_normal":"/static/img/node_default_normal.png","title":"Big Data","url":"https://www.v2ex.com/go/bigdata","topics":20,"footer":null,"header":null,"title_alternative":"Big Data","avatar_mini":"/static/img/node_default_mini.png","stars":43,"aliases":[],"root":false,"id":621,"parent_node_name":null},"member":{"username":"Geekerstar","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/66d5/eebe/424937_mini.png?m=1603440470","bio":"","url":"https://www.v2ex.com/u/Geekerstar","tagline":"","twitter":null,"created":1561543035,"avatar_large":"https://cdn.v2ex.com/avatar/66d5/eebe/424937_mini.png?m=1603440470","avatar_mini":"https://cdn.v2ex.com/avatar/66d5/eebe/424937_mini.png?m=1603440470","location":"","btc":null,"id":424937},"last_reply_by":"THESDZ","last_touched":1631156078,"title":"不影响业务系统的情况下如何做实时大屏展示呢？","url":"https://www.v2ex.com/t/800736","created":1631148567,"content":"目前需要做个大屏展示，不能对业务系统有侵入性，需要实现类似于新增一件商品大屏上数字就实时加 1，数据库 MySQL\r\n\r\n目前考虑是通过 canal 通过 binlog 订阅某几张表来实现新增通知机制，有没有什么更好的办法呢？是个小工程，周期很短。\r\n\r\n感谢大家！！！","content_rendered":"<p>目前需要做个大屏展示，不能对业务系统有侵入性，需要实现类似于新增一件商品大屏上数字就实时加 1，数据库 MySQL</p>\n<p>目前考虑是通过 canal 通过 binlog 订阅某几张表来实现新增通知机制，有没有什么更好的办法呢？是个小工程，周期很短。</p>\n<p>感谢大家！！！</p>\n","last_modified":1631148567,"replies":10,"id":800736},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1629391393","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1629391393","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":176294,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1629391393","stars":3310,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"username":"ikichen","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/96d5/1b9a/515866_mini.png?m=1605508411","bio":null,"url":"https://www.v2ex.com/u/ikichen","tagline":null,"twitter":null,"created":1604451506,"avatar_large":"https://cdn.v2ex.com/avatar/96d5/1b9a/515866_mini.png?m=1605508411","avatar_mini":"https://cdn.v2ex.com/avatar/96d5/1b9a/515866_mini.png?m=1605508411","location":null,"btc":null,"id":515866},"last_reply_by":"HeyYoGirls","last_touched":1631157760,"title":"ios 上有什么值得使用的广告屏蔽类 app？","url":"https://www.v2ex.com/t/800735","created":1631148466,"content":"","content_rendered":"","last_modified":1631148466,"replies":10,"id":800735},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/a3c6/5c29/108_large.png?m=1620107025","name":"bb","avatar_normal":"https://cdn.v2ex.com/navatar/a3c6/5c29/108_normal.png?m=1620107025","title":"宽带症候群","url":"https://www.v2ex.com/go/bb","topics":9732,"footer":"","header":"网速很重要。比快更快。","title_alternative":"Broadband Symptom Complex","avatar_mini":"https://cdn.v2ex.com/navatar/a3c6/5c29/108_mini.png?m=1620107025","stars":5125,"aliases":[],"root":false,"id":108,"parent_node_name":"geek"},"member":{"username":"acbot","website":"","github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/7640/3d73/549698_mini.png?m=1628508128","bio":"","url":"https://www.v2ex.com/u/acbot","tagline":"","twitter":null,"created":1625020039,"avatar_large":"https://cdn.v2ex.com/avatar/7640/3d73/549698_mini.png?m=1628508128","avatar_mini":"https://cdn.v2ex.com/avatar/7640/3d73/549698_mini.png?m=1628508128","location":"","btc":null,"id":549698},"last_reply_by":"Tianao","last_touched":1631163297,"title":"目前市面上家用级或入门级企业级路由器产品 IPv6 的支持度如何？","url":"https://www.v2ex.com/t/800770","created":1631156496,"content":"像 OP 这种软路由自定义度高功能也比较完善所以就不讨论了。目前手上有一个 TL-R479G+ 支持 IPv6，路由器 WEB 管理界面 IPv6 上网方面设置也比较丰富，但是管理界面上没有 IPv6 的端口发布功能（类似 IPv4 端口映射，虚拟服务器这种功能），咨询过厂家客服，结果是目前不支持 IPv6 对外发布端口。那么你所使用或者是了解的路由器中 IPv6 的支持度如何呢，特别是对外发布端口功能方面。 像以前 TP 的家用路由器都支持设置静态路由，现在带 “智能” “云” 字样的家用路由器都不支持了，更有甚者企业级路由器设置一个静态路由还必须得在指定接口范围设置，这个是退步还进步，为什么厂家不开放 SSH 让有需求的用户完成更细节的设置呢。","content_rendered":"像 OP 这种软路由自定义度高功能也比较完善所以就不讨论了。目前手上有一个 TL-R479G+ 支持 IPv6，路由器 WEB 管理界面 IPv6 上网方面设置也比较丰富，但是管理界面上没有 IPv6 的端口发布功能（类似 IPv4 端口映射，虚拟服务器这种功能），咨询过厂家客服，结果是目前不支持 IPv6 对外发布端口。那么你所使用或者是了解的路由器中 IPv6 的支持度如何呢，特别是对外发布端口功能方面。 像以前 TP 的家用路由器都支持设置静态路由，现在带 “智能” “云” 字样的家用路由器都不支持了，更有甚者企业级路由器设置一个静态路由还必须得在指定接口范围设置，这个是退步还进步，为什么厂家不开放 SSH 让有需求的用户完成更细节的设置呢。","last_modified":1631156496,"replies":9,"id":800770},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/9a11/5815/52_large.png?m=1630576655","name":"hardware","avatar_normal":"https://cdn.v2ex.com/navatar/9a11/5815/52_normal.png?m=1630576655","title":"硬件","url":"https://www.v2ex.com/go/hardware","topics":3997,"footer":"","header":"硬件发烧友的讨论节点","title_alternative":"Hardware","avatar_mini":"https://cdn.v2ex.com/navatar/9a11/5815/52_mini.png?m=1630576655","stars":1836,"aliases":[],"root":false,"id":52,"parent_node_name":"computer"},"member":{"username":"Zien","website":"","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/c7bf51717d24bc360222a9e7c32bce47?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/Zien","tagline":"","twitter":"","created":1538877355,"avatar_large":"https://cdn.v2ex.com/gravatar/c7bf51717d24bc360222a9e7c32bce47?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/c7bf51717d24bc360222a9e7c32bce47?s=24&d=retro","location":"","btc":"","id":354209},"last_reply_by":"siknet","last_touched":1631159397,"title":"求大佬们帮推荐一款性价比高的 nuc 类似的小机器","url":"https://www.v2ex.com/t/800743","created":1631150969,"content":"<div class=\"markdown_body\">\n <ol> \n  <li>看的眼花缭乱，只好来求助。不需要什么性能，可以 win10 开 idea+wsl 富余些即可，奔腾什么的都无所谓，尽量小，支持扩展信号不错的 Wi-Fi，最好支持 VGA+hdmi，尽量发热低，要稳定耐操。</li> \n  <li>希望利用的东西：闲置 ryzen 2200g 处理器，闲置 1t nvme 硬盘，闲置 16g 笔记本 ddr4 内存条，</li> \n  <li>我目前看中了 nuc8i5bek 和 deskmini a/x300 Wi-Fi 版，nuc8 性能过剩，不知道其他 nuc 在满足性能的情况下，哪个性价比高些？</li> \n  <li>小机器渠道是海鲜市场最划算吗？因为不是我自己用，在节约资金的前提下，尽量要少折腾不翻车。</li> \n </ol> \n</div>","content_rendered":"<div>\n<ol>\n<li>看的眼花缭乱，只好来求助。不需要什么性能，可以 win10 开 idea+wsl 富余些即可，奔腾什么的都无所谓，尽量小，支持扩展信号不错的 Wi-Fi，最好支持 VGA+hdmi，尽量发热低，要稳定耐操。</li>\n<li>希望利用的东西：闲置 ryzen 2200g 处理器，闲置 1t nvme 硬盘，闲置 16g 笔记本 ddr4 内存条，</li>\n<li>我目前看中了 nuc8i5bek 和 deskmini a/x300 Wi-Fi 版，nuc8 性能过剩，不知道其他 nuc 在满足性能的情况下，哪个性价比高些？</li>\n<li>小机器渠道是海鲜市场最划算吗？因为不是我自己用，在节约资金的前提下，尽量要少折腾不翻车。</li>\n</ol>\n</div>","last_modified":1631151325,"replies":9,"id":800743},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/f61d/6947/375_large.png?m=1585387643","name":"go","avatar_normal":"https://cdn.v2ex.com/navatar/f61d/6947/375_normal.png?m=1585387643","title":"Go","url":"https://www.v2ex.com/go/go","topics":1992,"footer":"","header":"Go 是一个开源的编程语言，它能让构造简单、可靠且高效的软件变得容易。","title_alternative":"The Go Programming Language","avatar_mini":"https://cdn.v2ex.com/navatar/f61d/6947/375_mini.png?m=1585387643","stars":2803,"aliases":[],"root":false,"id":375,"parent_node_name":"programming"},"member":{"username":"chaleaoch","website":"chaleaoch.com","github":"","psn":"","avatar_normal":"https://cdn.v2ex.com/avatar/92e0/46b3/126993_mini.png?m=1622082563","bio":"","url":"https://www.v2ex.com/u/chaleaoch","tagline":"Hello v2ex","twitter":"","created":1436786354,"avatar_large":"https://cdn.v2ex.com/avatar/92e0/46b3/126993_mini.png?m=1622082563","avatar_mini":"https://cdn.v2ex.com/avatar/92e0/46b3/126993_mini.png?m=1622082563","location":"大连","btc":"","id":126993},"last_reply_by":"abersheeran","last_touched":1631170385,"title":"Golang 写的 web 也分 Service 和 DAO 吗?","url":"https://www.v2ex.com/t/800816","created":1631168053,"content":"python 后端出身.\r\n\r\n第一次写 go web. 然后照着网上的开源项目抄. 我觉得 controller service Model 三层还是可以的. 毕竟业务扔到 Service 里面逻辑更清晰一些.\r\n\r\n然后和 Java 同事请教了一下. 令我困惑的是:\r\n- 类似验证密码的操作, 也要放到 Service 里面取做. 之前 django 的写法就是\r\n```\r\nuser_instance.check_passwork(request.Post['password']) \r\n```\r\n这样不行吗?\r\n为什么一定要\r\n```\r\n1. get password from DB\r\n2. checkpassword with request\r\n```\r\n\r\n---\r\n\r\n- Service 里面不要出现 SQL. 也就是说, 所有的查询都要用 Dao 转一手.\r\n譬如我要查询一个用户是否存在. 如果用 Gorm 的话\r\n```\r\nDB.Where(map[string]interface{}{\"user_id\":666}).Count(&count)\r\n```\r\n这句话必须放在 DAO 层, 而不是直接在 Service 里写?\r\n感觉好麻烦啊.\r\n\r\n我的问题是:\r\n1.  GO 可以更灵活吗? 更灵活一些是套路吗? 在开源项目中 / 实际商业项目中有成功案例吗?\r\n2. Java 分这么多层是 JavaEE 带进来的还是 Spring 带进来的? 还是谁带进来的? 没人提出过异议吗?\r\n\r\n\r\n谢谢","content_rendered":"<p>python 后端出身.</p>\n<p>第一次写 go web. 然后照着网上的开源项目抄. 我觉得 controller service Model 三层还是可以的. 毕竟业务扔到 Service 里面逻辑更清晰一些.</p>\n<p>然后和 Java 同事请教了一下. 令我困惑的是:</p>\n<ul>\n<li>类似验证密码的操作, 也要放到 Service 里面取做. 之前 django 的写法就是</li>\n</ul>\n<pre><code>user_instance.check_passwork(request.Post['password']) \n</code></pre>\n<p>这样不行吗?\n为什么一定要</p>\n<pre><code>1. get password from DB\n2. checkpassword with request\n</code></pre>\n<hr/>\n<ul>\n<li>Service 里面不要出现 SQL. 也就是说, 所有的查询都要用 Dao 转一手.\n譬如我要查询一个用户是否存在. 如果用 Gorm 的话</li>\n</ul>\n<pre><code>DB.Where(map[string]interface{}{\"user_id\":666}).Count(&amp;count)\n</code></pre>\n<p>这句话必须放在 DAO 层, 而不是直接在 Service 里写?\n感觉好麻烦啊.</p>\n<p>我的问题是:</p>\n<ol>\n<li>GO 可以更灵活吗? 更灵活一些是套路吗? 在开源项目中 / 实际商业项目中有成功案例吗?</li>\n<li>Java 分这么多层是 JavaEE 带进来的还是 Spring 带进来的? 还是谁带进来的? 没人提出过异议吗?</li>\n</ol>\n<p>谢谢</p>\n","last_modified":1631168088,"replies":8,"id":800816},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_large.png?m=1630643913","name":"apple","avatar_normal":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_normal.png?m=1630643913","title":"Apple","url":"https://www.v2ex.com/go/apple","topics":15729,"footer":"","header":"设计了 <a href=\"/go/watch\">Apple Watch</a>，<a href=\"/go/ipad\">iPad</a>，<a href=\"/go/iphone\">iPhone</a>，<a href=\"/go/imac\">iMac</a> 及 <a href=\"/go/mbp\">MacBook Pro</a> 等电子产品的美国公司。","title_alternative":"Apple","avatar_mini":"https://cdn.v2ex.com/navatar/6cdd/60ea/184_mini.png?m=1630643913","stars":1915,"aliases":[],"root":false,"id":184,"parent_node_name":"hardware"},"member":{"username":"EdwardYoung","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/a5e8/b03b/451677_mini.png?m=1605535843","bio":null,"url":"https://www.v2ex.com/u/EdwardYoung","tagline":null,"twitter":null,"created":1573113268,"avatar_large":"https://cdn.v2ex.com/avatar/a5e8/b03b/451677_mini.png?m=1605535843","avatar_mini":"https://cdn.v2ex.com/avatar/a5e8/b03b/451677_mini.png?m=1605535843","location":null,"btc":null,"id":451677},"last_reply_by":"EdwardYoung","last_touched":1631156260,"title":"MacBook Pro 上玩 Apple Arcade 游戏（接蓝牙手柄）","url":"https://www.v2ex.com/t/800738","created":1631149489,"content":"昨天订阅了家庭组的 Apple One，\r\n在手机上玩了几个小游戏，还蛮有趣的。\r\n好久没玩游戏了（步入老年人）\r\n\r\n嫌屏幕小，现在想回家后用 MacBook Pro 玩。\r\n想问：\r\n1. 推荐好游戏，online 联机对战 /合作类的更好，大家一起加敌友 /好友啊！！！\r\n2. 如果我接蓝牙手柄的话，有没有体验好(也就是便宜)的","content_rendered":"<p>昨天订阅了家庭组的 Apple One，\n在手机上玩了几个小游戏，还蛮有趣的。\n好久没玩游戏了（步入老年人）</p>\n<p>嫌屏幕小，现在想回家后用 MacBook Pro 玩。\n想问：</p>\n<ol>\n<li>推荐好游戏，online 联机对战 /合作类的更好，大家一起加敌友 /好友啊！！！</li>\n<li>如果我接蓝牙手柄的话，有没有体验好(也就是便宜)的</li>\n</ol>\n","last_modified":1631149489,"replies":8,"id":800738},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c74d/97b0/16_large.png?m=1628872984","name":"share","avatar_normal":"https://cdn.v2ex.com/navatar/c74d/97b0/16_normal.png?m=1628872984","title":"分享发现","url":"https://www.v2ex.com/go/share","topics":34334,"footer":"","header":"分享你看到的好玩的，有信息量的，欢迎从这里获取灵感。","title_alternative":"Share","avatar_mini":"https://cdn.v2ex.com/navatar/c74d/97b0/16_mini.png?m=1628872984","stars":4581,"aliases":[],"root":false,"id":16,"parent_node_name":"v2ex"},"member":{"username":"pupboss","website":"https://www.pupboss.com","github":"pupboss","psn":"","avatar_normal":"https://cdn.v2ex.com/gravatar/3652897765e29a5953d1ab3cb1dbfd11?s=24&d=retro","bio":"","url":"https://www.v2ex.com/u/pupboss","tagline":"","twitter":"isjetl","created":1419742245,"avatar_large":"https://cdn.v2ex.com/gravatar/3652897765e29a5953d1ab3cb1dbfd11?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/3652897765e29a5953d1ab3cb1dbfd11?s=24&d=retro","location":"Singapore","btc":"1EqdGcu7wgJWyNgdmfWQhRPqtU9wfD1vKv","id":88807},"last_reply_by":"Cavolo","last_touched":1631170482,"title":"Authy 导出密钥到其他 2FA 工具","url":"https://www.v2ex.com/t/800801","created":1631164460,"content":"有些网站不用标准的 otpauth + 密钥和二维码的实现，比如 SendGrid，他要求用户绑定 Authy，又不支持导出密钥到其他工具，因为绑定过程只需要给一个手机号，自动绑定到同账户的 Authy，所以这才有了下面的方法。不过有几点要注意的就是并不是所有 2FA 工具都支持转换过来的密钥，因为 Authy 有时候是 7 位的随机数字，再就是就算导入到其他软件，Authy 里面也别删，避免它和要验证的网站联动删除，导致账户无法登录。\r\n\r\n大概原理就是 Electron 有一个 debug 模式，在 app 运行的时候加入一个 --remote-debugging-port 参数，即可调用 Chrome 的控制台然后做任何想做的事情，而 Authy 桌面端正是用 Electron 写的。具体破解办法可以参考最后的代码，如果想了解更多信息也可以查看原文：[https://www.pupboss.com/exporting-authy-passwords-to-other-authenticators/]( https://www.pupboss.com/exporting-authy-passwords-to-other-authenticators/)\r\n\r\n```\r\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.QRious=e()}(this,function(){\"use strict\";function t(t,e){var n;return\"function\"==typeof Object.create?n=Object.create(t):(s.prototype=t,n=new s,s.prototype=null),e&&i(!0,n,e),n}function e(e,n,s,r){var o=this;return\"string\"!=typeof e&&(r=s,s=n,n=e,e=null),\"function\"!=typeof n&&(r=s,s=n,n=function(){return o.apply(this,arguments)}),i(!1,n,o,r),n.prototype=t(o.prototype,s),n.prototype.constructor=n,n.class_=e||o.class_,n.super_=o,n}function i(t,e,i){for(var n,s,a=0,h=(i=o.call(arguments,2)).length;a<h;a++){s=i[a];for(n in s)t&&!r.call(s,n)||(e[n]=s[n])}}function n(){}var s=function(){},r=Object.prototype.hasOwnProperty,o=Array.prototype.slice,a=e;n.class_=\"Nevis\",n.super_=Object,n.extend=a;var h=n,f=h.extend(function(t,e,i){this.qrious=t,this.element=e,this.element.qrious=t,this.enabled=Boolean(i)},{draw:function(t){},getElement:function(){return this.enabled||(this.enabled=!0,this.render()),this.element},getModuleSize:function(t){var e=this.qrious,i=e.padding||0,n=Math.floor((e.size-2*i)/t.width);return Math.max(1,n)},getOffset:function(t){var e=this.qrious,i=e.padding;if(null!=i)return i;var n=this.getModuleSize(t),s=Math.floor((e.size-n*t.width)/2);return Math.max(0,s)},render:function(t){this.enabled&&(this.resize(),this.reset(),this.draw(t))},reset:function(){},resize:function(){}}),c=f.extend({draw:function(t){var e,i,n=this.qrious,s=this.getModuleSize(t),r=this.getOffset(t),o=this.element.getContext(\"2d\");for(o.fillStyle=n.foreground,o.globalAlpha=n.foregroundAlpha,e=0;e<t.width;e++)for(i=0;i<t.width;i++)t.buffer[i*t.width+e]&&o.fillRect(s*e+r,s*i+r,s,s)},reset:function(){var t=this.qrious,e=this.element.getContext(\"2d\"),i=t.size;e.lineWidth=1,e.clearRect(0,0,i,i),e.fillStyle=t.background,e.globalAlpha=t.backgroundAlpha,e.fillRect(0,0,i,i)},resize:function(){var t=this.element;t.width=t.height=this.qrious.size}}),u=h.extend(null,{BLOCK:[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28]}),l=h.extend(null,{BLOCKS:[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],FINAL_FORMAT:[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],LEVELS:{L:1,M:2,Q:3,H:4}}),_=h.extend(null,{EXPONENT:[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],LOG:[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175]}),d=h.extend(null,{BLOCK:[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177]}),v=h.extend(function(t){var e,i,n,s,r,o=t.value.length;for(this._badness=[],this._level=l.LEVELS[t.level],this._polynomial=[],this._value=t.value,this._version=0,this._stringBuffer=[];this._version<40&&(this._version++,n=4*(this._level-1)+16*(this._version-1),s=l.BLOCKS[n++],r=l.BLOCKS[n++],e=l.BLOCKS[n++],i=l.BLOCKS[n],n=e*(s+r)+r-3+(this._version<=9),!(o<=n)););this._dataBlock=e,this._eccBlock=i,this._neccBlock1=s,this._neccBlock2=r;var a=this.width=17+4*this._version;this.buffer=v._createArray(a*a),this._ecc=v._createArray(e+(e+i)*(s+r)+r),this._mask=v._createArray((a*(a+1)+1)/2),this._insertFinders(),this._insertAlignments(),this.buffer[8+a*(a-8)]=1,this._insertTimingGap(),this._reverseMask(),this._insertTimingRowAndColumn(),this._insertVersion(),this._syncMask(),this._convertBitStream(o),this._calculatePolynomial(),this._appendEccToData(),this._interleaveBlocks(),this._pack(),this._finish()},{_addAlignment:function(t,e){var i,n=this.buffer,s=this.width;for(n[t+s*e]=1,i=-2;i<2;i++)n[t+i+s*(e-2)]=1,n[t-2+s*(e+i+1)]=1,n[t+2+s*(e+i)]=1,n[t+i+1+s*(e+2)]=1;for(i=0;i<2;i++)this._setMask(t-1,e+i),this._setMask(t+1,e-i),this._setMask(t-i,e-1),this._setMask(t+i,e+1)},_appendData:function(t,e,i,n){var s,r,o,a=this._polynomial,h=this._stringBuffer;for(r=0;r<n;r++)h[i+r]=0;for(r=0;r<e;r++){if(255!==(s=_.LOG[h[t+r]^h[i]]))for(o=1;o<n;o++)h[i+o-1]=h[i+o]^_.EXPONENT[v._modN(s+a[n-o])];else for(o=i;o<i+n;o++)h[o]=h[o+1];h[i+n-1]=255===s?0:_.EXPONENT[v._modN(s+a[0])]}},_appendEccToData:function(){var t,e=0,i=this._dataBlock,n=this._calculateMaxLength(),s=this._eccBlock;for(t=0;t<this._neccBlock1;t++)this._appendData(e,i,n,s),e+=i,n+=s;for(t=0;t<this._neccBlock2;t++)this._appendData(e,i+1,n,s),e+=i+1,n+=s},_applyMask:function(t){var e,i,n,s,r=this.buffer,o=this.width;switch(t){case 0:for(s=0;s<o;s++)for(n=0;n<o;n++)n+s&1||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 1:for(s=0;s<o;s++)for(n=0;n<o;n++)1&s||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 2:for(s=0;s<o;s++)for(e=0,n=0;n<o;n++,e++)3===e&&(e=0),e||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 3:for(i=0,s=0;s<o;s++,i++)for(3===i&&(i=0),e=i,n=0;n<o;n++,e++)3===e&&(e=0),e||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 4:for(s=0;s<o;s++)for(e=0,i=s>>1&1,n=0;n<o;n++,e++)3===e&&(e=0,i=!i),i||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 5:for(i=0,s=0;s<o;s++,i++)for(3===i&&(i=0),e=0,n=0;n<o;n++,e++)3===e&&(e=0),(n&s&1)+!(!e|!i)||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 6:for(i=0,s=0;s<o;s++,i++)for(3===i&&(i=0),e=0,n=0;n<o;n++,e++)3===e&&(e=0),(n&s&1)+(e&&e===i)&1||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 7:for(i=0,s=0;s<o;s++,i++)for(3===i&&(i=0),e=0,n=0;n<o;n++,e++)3===e&&(e=0),(e&&e===i)+(n+s&1)&1||this._isMasked(n,s)||(r[n+s*o]^=1)}},_calculateMaxLength:function(){return this._dataBlock*(this._neccBlock1+this._neccBlock2)+this._neccBlock2},_calculatePolynomial:function(){var t,e,i=this._eccBlock,n=this._polynomial;for(n[0]=1,t=0;t<i;t++){for(n[t+1]=1,e=t;e>0;e--)n[e]=n[e]?n[e-1]^_.EXPONENT[v._modN(_.LOG[n[e]]+t)]:n[e-1];n[0]=_.EXPONENT[v._modN(_.LOG[n[0]]+t)]}for(t=0;t<=i;t++)n[t]=_.LOG[n[t]]},_checkBadness:function(){var t,e,i,n,s,r=0,o=this._badness,a=this.buffer,h=this.width;for(s=0;s<h-1;s++)for(n=0;n<h-1;n++)(a[n+h*s]&&a[n+1+h*s]&&a[n+h*(s+1)]&&a[n+1+h*(s+1)]||!(a[n+h*s]||a[n+1+h*s]||a[n+h*(s+1)]||a[n+1+h*(s+1)]))&&(r+=v.N2);var f=0;for(s=0;s<h;s++){for(i=0,o[0]=0,t=0,n=0;n<h;n++)t===(e=a[n+h*s])?o[i]++:o[++i]=1,f+=(t=e)?1:-1;r+=this._getBadness(i)}f<0&&(f=-f);var c=0,u=f;for(u+=u<<2,u<<=1;u>h*h;)u-=h*h,c++;for(r+=c*v.N4,n=0;n<h;n++){for(i=0,o[0]=0,t=0,s=0;s<h;s++)t===(e=a[n+h*s])?o[i]++:o[++i]=1,t=e;r+=this._getBadness(i)}return r},_convertBitStream:function(t){var e,i,n=this._ecc,s=this._version;for(i=0;i<t;i++)n[i]=this._value.charCodeAt(i);var r=this._stringBuffer=n.slice(),o=this._calculateMaxLength();t>=o-2&&(t=o-2,s>9&&t--);var a=t;if(s>9){for(r[a+2]=0,r[a+3]=0;a--;)e=r[a],r[a+3]|=255&e<<4,r[a+2]=e>>4;r[2]|=255&t<<4,r[1]=t>>4,r[0]=64|t>>12}else{for(r[a+1]=0,r[a+2]=0;a--;)e=r[a],r[a+2]|=255&e<<4,r[a+1]=e>>4;r[1]|=255&t<<4,r[0]=64|t>>4}for(a=t+3-(s<10);a<o;)r[a++]=236,r[a++]=17},_getBadness:function(t){var e,i=0,n=this._badness;for(e=0;e<=t;e++)n[e]>=5&&(i+=v.N1+n[e]-5);for(e=3;e<t-1;e+=2)n[e-2]===n[e+2]&&n[e+2]===n[e-1]&&n[e-1]===n[e+1]&&3*n[e-1]===n[e]&&(0===n[e-3]||e+3>t||3*n[e-3]>=4*n[e]||3*n[e+3]>=4*n[e])&&(i+=v.N3);return i},_finish:function(){this._stringBuffer=this.buffer.slice();var t,e,i=0,n=3e4;for(e=0;e<8&&(this._applyMask(e),(t=this._checkBadness())<n&&(n=t,i=e),7!==i);e++)this.buffer=this._stringBuffer.slice();i!==e&&this._applyMask(i),n=l.FINAL_FORMAT[i+(this._level-1<<3)];var s=this.buffer,r=this.width;for(e=0;e<8;e++,n>>=1)1&n&&(s[r-1-e+8*r]=1,e<6?s[8+r*e]=1:s[8+r*(e+1)]=1);for(e=0;e<7;e++,n>>=1)1&n&&(s[8+r*(r-7+e)]=1,e?s[6-e+8*r]=1:s[7+8*r]=1)},_interleaveBlocks:function(){var t,e,i=this._dataBlock,n=this._ecc,s=this._eccBlock,r=0,o=this._calculateMaxLength(),a=this._neccBlock1,h=this._neccBlock2,f=this._stringBuffer;for(t=0;t<i;t++){for(e=0;e<a;e++)n[r++]=f[t+e*i];for(e=0;e<h;e++)n[r++]=f[a*i+t+e*(i+1)]}for(e=0;e<h;e++)n[r++]=f[a*i+t+e*(i+1)];for(t=0;t<s;t++)for(e=0;e<a+h;e++)n[r++]=f[o+t+e*s];this._stringBuffer=n},_insertAlignments:function(){var t,e,i,n=this._version,s=this.width;if(n>1)for(t=u.BLOCK[n],i=s-7;;){for(e=s-7;e>t-3&&(this._addAlignment(e,i),!(e<t));)e-=t;if(i<=t+9)break;i-=t,this._addAlignment(6,i),this._addAlignment(i,6)}},_insertFinders:function(){var t,e,i,n,s=this.buffer,r=this.width;for(t=0;t<3;t++){for(e=0,n=0,1===t&&(e=r-7),2===t&&(n=r-7),s[n+3+r*(e+3)]=1,i=0;i<6;i++)s[n+i+r*e]=1,s[n+r*(e+i+1)]=1,s[n+6+r*(e+i)]=1,s[n+i+1+r*(e+6)]=1;for(i=1;i<5;i++)this._setMask(n+i,e+1),this._setMask(n+1,e+i+1),this._setMask(n+5,e+i),this._setMask(n+i+1,e+5);for(i=2;i<4;i++)s[n+i+r*(e+2)]=1,s[n+2+r*(e+i+1)]=1,s[n+4+r*(e+i)]=1,s[n+i+1+r*(e+4)]=1}},_insertTimingGap:function(){var t,e,i=this.width;for(e=0;e<7;e++)this._setMask(7,e),this._setMask(i-8,e),this._setMask(7,e+i-7);for(t=0;t<8;t++)this._setMask(t,7),this._setMask(t+i-8,7),this._setMask(t,i-8)},_insertTimingRowAndColumn:function(){var t,e=this.buffer,i=this.width;for(t=0;t<i-14;t++)1&t?(this._setMask(8+t,6),this._setMask(6,8+t)):(e[8+t+6*i]=1,e[6+i*(8+t)]=1)},_insertVersion:function(){var t,e,i,n,s=this.buffer,r=this._version,o=this.width;if(r>6)for(t=d.BLOCK[r-7],e=17,i=0;i<6;i++)for(n=0;n<3;n++,e--)1&(e>11?r>>e-12:t>>e)?(s[5-i+o*(2-n+o-11)]=1,s[2-n+o-11+o*(5-i)]=1):(this._setMask(5-i,2-n+o-11),this._setMask(2-n+o-11,5-i))},_isMasked:function(t,e){var i=v._getMaskBit(t,e);return 1===this._mask[i]},_pack:function(){var t,e,i,n=1,s=1,r=this.width,o=r-1,a=r-1,h=(this._dataBlock+this._eccBlock)*(this._neccBlock1+this._neccBlock2)+this._neccBlock2;for(e=0;e<h;e++)for(t=this._stringBuffer[e],i=0;i<8;i++,t<<=1){128&t&&(this.buffer[o+r*a]=1);do{s?o--:(o++,n?0!==a?a--:(n=!n,6===(o-=2)&&(o--,a=9)):a!==r-1?a++:(n=!n,6===(o-=2)&&(o--,a-=8))),s=!s}while(this._isMasked(o,a))}},_reverseMask:function(){var t,e,i=this.width;for(t=0;t<9;t++)this._setMask(t,8);for(t=0;t<8;t++)this._setMask(t+i-8,8),this._setMask(8,t);for(e=0;e<7;e++)this._setMask(8,e+i-7)},_setMask:function(t,e){var i=v._getMaskBit(t,e);this._mask[i]=1},_syncMask:function(){var t,e,i=this.width;for(e=0;e<i;e++)for(t=0;t<=e;t++)this.buffer[t+i*e]&&this._setMask(t,e)}},{_createArray:function(t){var e,i=[];for(e=0;e<t;e++)i[e]=0;return i},_getMaskBit:function(t,e){var i;return t>e&&(i=t,t=e,e=i),i=e,i+=e*e,i>>=1,i+=t},_modN:function(t){for(;t>=255;)t=((t-=255)>>8)+(255&t);return t},N1:3,N2:3,N3:40,N4:10}),p=v,m=f.extend({draw:function(){this.element.src=this.qrious.toDataURL()},reset:function(){this.element.src=\"\"},resize:function(){var t=this.element;t.width=t.height=this.qrious.size}}),g=h.extend(function(t,e,i,n){this.name=t,this.modifiable=Boolean(e),this.defaultValue=i,this._valueTransformer=n},{transform:function(t){var e=this._valueTransformer;return\"function\"==typeof e?e(t,this):t}}),k=h.extend(null,{abs:function(t){return null!=t?Math.abs(t):null},hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},noop:function(){},toUpperCase:function(t){return null!=t?t.toUpperCase():null}}),w=h.extend(function(t){this.options={},t.forEach(function(t){this.options[t.name]=t},this)},{exists:function(t){return null!=this.options[t]},get:function(t,e){return w._get(this.options[t],e)},getAll:function(t){var e,i=this.options,n={};for(e in i)k.hasOwn(i,e)&&(n[e]=w._get(i[e],t));return n},init:function(t,e,i){\"function\"!=typeof i&&(i=k.noop);var n,s;for(n in this.options)k.hasOwn(this.options,n)&&(s=this.options[n],w._set(s,s.defaultValue,e),w._createAccessor(s,e,i));this._setAll(t,e,!0)},set:function(t,e,i){return this._set(t,e,i)},setAll:function(t,e){return this._setAll(t,e)},_set:function(t,e,i,n){var s=this.options[t];if(!s)throw new Error(\"Invalid option: \"+t);if(!s.modifiable&&!n)throw new Error(\"Option cannot be modified: \"+t);return w._set(s,e,i)},_setAll:function(t,e,i){if(!t)return!1;var n,s=!1;for(n in t)k.hasOwn(t,n)&&this._set(n,t[n],e,i)&&(s=!0);return s}},{_createAccessor:function(t,e,i){var n={get:function(){return w._get(t,e)}};t.modifiable&&(n.set=function(n){w._set(t,n,e)&&i(n,t)}),Object.defineProperty(e,t.name,n)},_get:function(t,e){return e[\"_\"+t.name]},_set:function(t,e,i){var n=\"_\"+t.name,s=i[n],r=t.transform(null!=e?e:t.defaultValue);return i[n]=r,r!==s}}),M=w,b=h.extend(function(){this._services={}},{getService:function(t){var e=this._services[t];if(!e)throw new Error(\"Service is not being managed with name: \"+t);return e},setService:function(t,e){if(this._services[t])throw new Error(\"Service is already managed with name: \"+t);e&&(this._services[t]=e)}}),B=new M([new g(\"background\",!0,\"white\"),new g(\"backgroundAlpha\",!0,1,k.abs),new g(\"element\"),new g(\"foreground\",!0,\"black\"),new g(\"foregroundAlpha\",!0,1,k.abs),new g(\"level\",!0,\"L\",k.toUpperCase),new g(\"mime\",!0,\"image/png\"),new g(\"padding\",!0,null,k.abs),new g(\"size\",!0,100,k.abs),new g(\"value\",!0,\"\")]),y=new b,O=h.extend(function(t){B.init(t,this,this.update.bind(this));var e=B.get(\"element\",this),i=y.getService(\"element\"),n=e&&i.isCanvas(e)?e:i.createCanvas(),s=e&&i.isImage(e)?e:i.createImage();this._canvasRenderer=new c(this,n,!0),this._imageRenderer=new m(this,s,s===e),this.update()},{get:function(){return B.getAll(this)},set:function(t){B.setAll(t,this)&&this.update()},toDataURL:function(t){return this.canvas.toDataURL(t||this.mime)},update:function(){var t=new p({level:this.level,value:this.value});this._canvasRenderer.render(t),this._imageRenderer.render(t)}},{use:function(t){y.setService(t.getName(),t)}});Object.defineProperties(O.prototype,{canvas:{get:function(){return this._canvasRenderer.getElement()}},image:{get:function(){return this._imageRenderer.getElement()}}});var A=O,L=h.extend({getName:function(){}}).extend({createCanvas:function(){},createImage:function(){},getName:function(){return\"element\"},isCanvas:function(t){},isImage:function(t){}}).extend({createCanvas:function(){return document.createElement(\"canvas\")},createImage:function(){return document.createElement(\"img\")},isCanvas:function(t){return t instanceof HTMLCanvasElement},isImage:function(t){return t instanceof HTMLImageElement}});return A.use(new L),A});\r\n\r\nfunction hex_to_b32(hex) { let alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\"; let bytes = []; for (let i = 0; i < hex.length; i += 2) { bytes.push(parseInt(hex.substr(i, 2), 16)); } let bits = 0; let value = 0; let output = ''; for (let i = 0; i < bytes.length; i++) { value = (value << 8) | bytes[i]; bits += 8; while (bits >= 5) { output += alphabet[(value >>> (bits - 5)) & 31]; bits -= 5; } } if (bits > 0) { output += alphabet[(value << (5 - bits)) & 31]; } return output; }\r\n\r\nfunction console_image(url, size) { console.log(\"%c+\", \"font-size: 1px; padding: \" + Math.floor(size / 2) + \"px \" + Math.floor(size / 2) + \"px; line-height: \" + size + \"px; background: url(\" + url + \"); color: transparent;\"); }\r\n\r\n(function(console) { console.save = function(data, filename) { if (!data) { console.error('Console.save: No data'); return; } if (typeof data === \"object\") { data = JSON.stringify(data, undefined, 4) } var blob = new Blob([data], {type: 'text/json'}), e = document.createEvent('MouseEvents'), a = document.createElement('a'); a.download = filename; a.href = window.URL.createObjectURL(blob); a.dataset.downloadurl =  ['text/json', a.download, a.href].join(':'); e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null); a.dispatchEvent(e); } })(console);\r\n\r\nconsole.warn(\"Here's your Authy tokens:\");\r\nvar data = appManager.getModel().map(function(i) {\r\n  var secret = (i.markedForDeletion === false ? i.decryptedSeed : hex_to_b32(i.secretSeed));\r\n  var period = (i.digits === 7 ? 10 : 30);\r\n  var totp_uri = `otpauth://totp/${encodeURIComponent(i.name)}?secret=${secret}&digits=${i.digits}&period=${period}`;\r\n  console.group(i.name); console.log('TOTP secret:', secret); console.log('TOTP URI:', totp_uri); var qr_size = 250; var url = (new QRious({value: totp_uri, size: qr_size})).toDataURL(); console_image(url, qr_size); console.groupEnd();\r\n  return {name: i.name, secret: secret, uri: totp_uri};\r\n});\r\n```","content_rendered":"<p>有些网站不用标准的 otpauth + 密钥和二维码的实现，比如 SendGrid，他要求用户绑定 Authy，又不支持导出密钥到其他工具，因为绑定过程只需要给一个手机号，自动绑定到同账户的 Authy，所以这才有了下面的方法。不过有几点要注意的就是并不是所有 2FA 工具都支持转换过来的密钥，因为 Authy 有时候是 7 位的随机数字，再就是就算导入到其他软件，Authy 里面也别删，避免它和要验证的网站联动删除，导致账户无法登录。</p>\n<p>大概原理就是 Electron 有一个 debug 模式，在 app 运行的时候加入一个 --remote-debugging-port 参数，即可调用 Chrome 的控制台然后做任何想做的事情，而 Authy 桌面端正是用 Electron 写的。具体破解办法可以参考最后的代码，如果想了解更多信息也可以查看原文：<a href=\"https://www.pupboss.com/exporting-authy-passwords-to-other-authenticators/\" rel=\"nofollow\">https://www.pupboss.com/exporting-authy-passwords-to-other-authenticators/</a></p>\n<pre><code>!function(t,e){\"object\"==typeof exports&amp;&amp;\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&amp;&amp;define.amd?define(e):t.QRious=e()}(this,function(){\"use strict\";function t(t,e){var n;return\"function\"==typeof Object.create?n=Object.create(t):(s.prototype=t,n=new s,s.prototype=null),e&amp;&amp;i(!0,n,e),n}function e(e,n,s,r){var o=this;return\"string\"!=typeof e&amp;&amp;(r=s,s=n,n=e,e=null),\"function\"!=typeof n&amp;&amp;(r=s,s=n,n=function(){return o.apply(this,arguments)}),i(!1,n,o,r),n.prototype=t(o.prototype,s),n.prototype.constructor=n,n.class_=e||o.class_,n.super_=o,n}function i(t,e,i){for(var n,s,a=0,h=(i=o.call(arguments,2)).length;a&lt;h;a++){s=i[a];for(n in s)t&amp;&amp;!r.call(s,n)||(e[n]=s[n])}}function n(){}var s=function(){},r=Object.prototype.hasOwnProperty,o=Array.prototype.slice,a=e;n.class_=\"Nevis\",n.super_=Object,n.extend=a;var h=n,f=h.extend(function(t,e,i){this.qrious=t,this.element=e,this.element.qrious=t,this.enabled=Boolean(i)},{draw:function(t){},getElement:function(){return this.enabled||(this.enabled=!0,this.render()),this.element},getModuleSize:function(t){var e=this.qrious,i=e.padding||0,n=Math.floor((e.size-2*i)/t.width);return Math.max(1,n)},getOffset:function(t){var e=this.qrious,i=e.padding;if(null!=i)return i;var n=this.getModuleSize(t),s=Math.floor((e.size-n*t.width)/2);return Math.max(0,s)},render:function(t){this.enabled&amp;&amp;(this.resize(),this.reset(),this.draw(t))},reset:function(){},resize:function(){}}),c=f.extend({draw:function(t){var e,i,n=this.qrious,s=this.getModuleSize(t),r=this.getOffset(t),o=this.element.getContext(\"2d\");for(o.fillStyle=n.foreground,o.globalAlpha=n.foregroundAlpha,e=0;e&lt;t.width;e++)for(i=0;i&lt;t.width;i++)t.buffer[i*t.width+e]&amp;&amp;o.fillRect(s*e+r,s*i+r,s,s)},reset:function(){var t=this.qrious,e=this.element.getContext(\"2d\"),i=t.size;e.lineWidth=1,e.clearRect(0,0,i,i),e.fillStyle=t.background,e.globalAlpha=t.backgroundAlpha,e.fillRect(0,0,i,i)},resize:function(){var t=this.element;t.width=t.height=this.qrious.size}}),u=h.extend(null,{BLOCK:[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28]}),l=h.extend(null,{BLOCKS:[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],FINAL_FORMAT:[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],LEVELS:{L:1,M:2,Q:3,H:4}}),_=h.extend(null,{EXPONENT:[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],LOG:[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175]}),d=h.extend(null,{BLOCK:[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177]}),v=h.extend(function(t){var e,i,n,s,r,o=t.value.length;for(this._badness=[],this._level=l.LEVELS[t.level],this._polynomial=[],this._value=t.value,this._version=0,this._stringBuffer=[];this._version&lt;40&amp;&amp;(this._version++,n=4*(this._level-1)+16*(this._version-1),s=l.BLOCKS[n++],r=l.BLOCKS[n++],e=l.BLOCKS[n++],i=l.BLOCKS[n],n=e*(s+r)+r-3+(this._version&lt;=9),!(o&lt;=n)););this._dataBlock=e,this._eccBlock=i,this._neccBlock1=s,this._neccBlock2=r;var a=this.width=17+4*this._version;this.buffer=v._createArray(a*a),this._ecc=v._createArray(e+(e+i)*(s+r)+r),this._mask=v._createArray((a*(a+1)+1)/2),this._insertFinders(),this._insertAlignments(),this.buffer[8+a*(a-8)]=1,this._insertTimingGap(),this._reverseMask(),this._insertTimingRowAndColumn(),this._insertVersion(),this._syncMask(),this._convertBitStream(o),this._calculatePolynomial(),this._appendEccToData(),this._interleaveBlocks(),this._pack(),this._finish()},{_addAlignment:function(t,e){var i,n=this.buffer,s=this.width;for(n[t+s*e]=1,i=-2;i&lt;2;i++)n[t+i+s*(e-2)]=1,n[t-2+s*(e+i+1)]=1,n[t+2+s*(e+i)]=1,n[t+i+1+s*(e+2)]=1;for(i=0;i&lt;2;i++)this._setMask(t-1,e+i),this._setMask(t+1,e-i),this._setMask(t-i,e-1),this._setMask(t+i,e+1)},_appendData:function(t,e,i,n){var s,r,o,a=this._polynomial,h=this._stringBuffer;for(r=0;r&lt;n;r++)h[i+r]=0;for(r=0;r&lt;e;r++){if(255!==(s=_.LOG[h[t+r]^h[i]]))for(o=1;o&lt;n;o++)h[i+o-1]=h[i+o]^_.EXPONENT[v._modN(s+a[n-o])];else for(o=i;o&lt;i+n;o++)h[o]=h[o+1];h[i+n-1]=255===s?0:_.EXPONENT[v._modN(s+a[0])]}},_appendEccToData:function(){var t,e=0,i=this._dataBlock,n=this._calculateMaxLength(),s=this._eccBlock;for(t=0;t&lt;this._neccBlock1;t++)this._appendData(e,i,n,s),e+=i,n+=s;for(t=0;t&lt;this._neccBlock2;t++)this._appendData(e,i+1,n,s),e+=i+1,n+=s},_applyMask:function(t){var e,i,n,s,r=this.buffer,o=this.width;switch(t){case 0:for(s=0;s&lt;o;s++)for(n=0;n&lt;o;n++)n+s&amp;1||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 1:for(s=0;s&lt;o;s++)for(n=0;n&lt;o;n++)1&amp;s||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 2:for(s=0;s&lt;o;s++)for(e=0,n=0;n&lt;o;n++,e++)3===e&amp;&amp;(e=0),e||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 3:for(i=0,s=0;s&lt;o;s++,i++)for(3===i&amp;&amp;(i=0),e=i,n=0;n&lt;o;n++,e++)3===e&amp;&amp;(e=0),e||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 4:for(s=0;s&lt;o;s++)for(e=0,i=s&gt;&gt;1&amp;1,n=0;n&lt;o;n++,e++)3===e&amp;&amp;(e=0,i=!i),i||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 5:for(i=0,s=0;s&lt;o;s++,i++)for(3===i&amp;&amp;(i=0),e=0,n=0;n&lt;o;n++,e++)3===e&amp;&amp;(e=0),(n&amp;s&amp;1)+!(!e|!i)||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 6:for(i=0,s=0;s&lt;o;s++,i++)for(3===i&amp;&amp;(i=0),e=0,n=0;n&lt;o;n++,e++)3===e&amp;&amp;(e=0),(n&amp;s&amp;1)+(e&amp;&amp;e===i)&amp;1||this._isMasked(n,s)||(r[n+s*o]^=1);break;case 7:for(i=0,s=0;s&lt;o;s++,i++)for(3===i&amp;&amp;(i=0),e=0,n=0;n&lt;o;n++,e++)3===e&amp;&amp;(e=0),(e&amp;&amp;e===i)+(n+s&amp;1)&amp;1||this._isMasked(n,s)||(r[n+s*o]^=1)}},_calculateMaxLength:function(){return this._dataBlock*(this._neccBlock1+this._neccBlock2)+this._neccBlock2},_calculatePolynomial:function(){var t,e,i=this._eccBlock,n=this._polynomial;for(n[0]=1,t=0;t&lt;i;t++){for(n[t+1]=1,e=t;e&gt;0;e--)n[e]=n[e]?n[e-1]^_.EXPONENT[v._modN(_.LOG[n[e]]+t)]:n[e-1];n[0]=_.EXPONENT[v._modN(_.LOG[n[0]]+t)]}for(t=0;t&lt;=i;t++)n[t]=_.LOG[n[t]]},_checkBadness:function(){var t,e,i,n,s,r=0,o=this._badness,a=this.buffer,h=this.width;for(s=0;s&lt;h-1;s++)for(n=0;n&lt;h-1;n++)(a[n+h*s]&amp;&amp;a[n+1+h*s]&amp;&amp;a[n+h*(s+1)]&amp;&amp;a[n+1+h*(s+1)]||!(a[n+h*s]||a[n+1+h*s]||a[n+h*(s+1)]||a[n+1+h*(s+1)]))&amp;&amp;(r+=v.N2);var f=0;for(s=0;s&lt;h;s++){for(i=0,o[0]=0,t=0,n=0;n&lt;h;n++)t===(e=a[n+h*s])?o[i]++:o[++i]=1,f+=(t=e)?1:-1;r+=this._getBadness(i)}f&lt;0&amp;&amp;(f=-f);var c=0,u=f;for(u+=u&lt;&lt;2,u&lt;&lt;=1;u&gt;h*h;)u-=h*h,c++;for(r+=c*v.N4,n=0;n&lt;h;n++){for(i=0,o[0]=0,t=0,s=0;s&lt;h;s++)t===(e=a[n+h*s])?o[i]++:o[++i]=1,t=e;r+=this._getBadness(i)}return r},_convertBitStream:function(t){var e,i,n=this._ecc,s=this._version;for(i=0;i&lt;t;i++)n[i]=this._value.charCodeAt(i);var r=this._stringBuffer=n.slice(),o=this._calculateMaxLength();t&gt;=o-2&amp;&amp;(t=o-2,s&gt;9&amp;&amp;t--);var a=t;if(s&gt;9){for(r[a+2]=0,r[a+3]=0;a--;)e=r[a],r[a+3]|=255&amp;e&lt;&lt;4,r[a+2]=e&gt;&gt;4;r[2]|=255&amp;t&lt;&lt;4,r[1]=t&gt;&gt;4,r[0]=64|t&gt;&gt;12}else{for(r[a+1]=0,r[a+2]=0;a--;)e=r[a],r[a+2]|=255&amp;e&lt;&lt;4,r[a+1]=e&gt;&gt;4;r[1]|=255&amp;t&lt;&lt;4,r[0]=64|t&gt;&gt;4}for(a=t+3-(s&lt;10);a&lt;o;)r[a++]=236,r[a++]=17},_getBadness:function(t){var e,i=0,n=this._badness;for(e=0;e&lt;=t;e++)n[e]&gt;=5&amp;&amp;(i+=v.N1+n[e]-5);for(e=3;e&lt;t-1;e+=2)n[e-2]===n[e+2]&amp;&amp;n[e+2]===n[e-1]&amp;&amp;n[e-1]===n[e+1]&amp;&amp;3*n[e-1]===n[e]&amp;&amp;(0===n[e-3]||e+3&gt;t||3*n[e-3]&gt;=4*n[e]||3*n[e+3]&gt;=4*n[e])&amp;&amp;(i+=v.N3);return i},_finish:function(){this._stringBuffer=this.buffer.slice();var t,e,i=0,n=3e4;for(e=0;e&lt;8&amp;&amp;(this._applyMask(e),(t=this._checkBadness())&lt;n&amp;&amp;(n=t,i=e),7!==i);e++)this.buffer=this._stringBuffer.slice();i!==e&amp;&amp;this._applyMask(i),n=l.FINAL_FORMAT[i+(this._level-1&lt;&lt;3)];var s=this.buffer,r=this.width;for(e=0;e&lt;8;e++,n&gt;&gt;=1)1&amp;n&amp;&amp;(s[r-1-e+8*r]=1,e&lt;6?s[8+r*e]=1:s[8+r*(e+1)]=1);for(e=0;e&lt;7;e++,n&gt;&gt;=1)1&amp;n&amp;&amp;(s[8+r*(r-7+e)]=1,e?s[6-e+8*r]=1:s[7+8*r]=1)},_interleaveBlocks:function(){var t,e,i=this._dataBlock,n=this._ecc,s=this._eccBlock,r=0,o=this._calculateMaxLength(),a=this._neccBlock1,h=this._neccBlock2,f=this._stringBuffer;for(t=0;t&lt;i;t++){for(e=0;e&lt;a;e++)n[r++]=f[t+e*i];for(e=0;e&lt;h;e++)n[r++]=f[a*i+t+e*(i+1)]}for(e=0;e&lt;h;e++)n[r++]=f[a*i+t+e*(i+1)];for(t=0;t&lt;s;t++)for(e=0;e&lt;a+h;e++)n[r++]=f[o+t+e*s];this._stringBuffer=n},_insertAlignments:function(){var t,e,i,n=this._version,s=this.width;if(n&gt;1)for(t=u.BLOCK[n],i=s-7;;){for(e=s-7;e&gt;t-3&amp;&amp;(this._addAlignment(e,i),!(e&lt;t));)e-=t;if(i&lt;=t+9)break;i-=t,this._addAlignment(6,i),this._addAlignment(i,6)}},_insertFinders:function(){var t,e,i,n,s=this.buffer,r=this.width;for(t=0;t&lt;3;t++){for(e=0,n=0,1===t&amp;&amp;(e=r-7),2===t&amp;&amp;(n=r-7),s[n+3+r*(e+3)]=1,i=0;i&lt;6;i++)s[n+i+r*e]=1,s[n+r*(e+i+1)]=1,s[n+6+r*(e+i)]=1,s[n+i+1+r*(e+6)]=1;for(i=1;i&lt;5;i++)this._setMask(n+i,e+1),this._setMask(n+1,e+i+1),this._setMask(n+5,e+i),this._setMask(n+i+1,e+5);for(i=2;i&lt;4;i++)s[n+i+r*(e+2)]=1,s[n+2+r*(e+i+1)]=1,s[n+4+r*(e+i)]=1,s[n+i+1+r*(e+4)]=1}},_insertTimingGap:function(){var t,e,i=this.width;for(e=0;e&lt;7;e++)this._setMask(7,e),this._setMask(i-8,e),this._setMask(7,e+i-7);for(t=0;t&lt;8;t++)this._setMask(t,7),this._setMask(t+i-8,7),this._setMask(t,i-8)},_insertTimingRowAndColumn:function(){var t,e=this.buffer,i=this.width;for(t=0;t&lt;i-14;t++)1&amp;t?(this._setMask(8+t,6),this._setMask(6,8+t)):(e[8+t+6*i]=1,e[6+i*(8+t)]=1)},_insertVersion:function(){var t,e,i,n,s=this.buffer,r=this._version,o=this.width;if(r&gt;6)for(t=d.BLOCK[r-7],e=17,i=0;i&lt;6;i++)for(n=0;n&lt;3;n++,e--)1&amp;(e&gt;11?r&gt;&gt;e-12:t&gt;&gt;e)?(s[5-i+o*(2-n+o-11)]=1,s[2-n+o-11+o*(5-i)]=1):(this._setMask(5-i,2-n+o-11),this._setMask(2-n+o-11,5-i))},_isMasked:function(t,e){var i=v._getMaskBit(t,e);return 1===this._mask[i]},_pack:function(){var t,e,i,n=1,s=1,r=this.width,o=r-1,a=r-1,h=(this._dataBlock+this._eccBlock)*(this._neccBlock1+this._neccBlock2)+this._neccBlock2;for(e=0;e&lt;h;e++)for(t=this._stringBuffer[e],i=0;i&lt;8;i++,t&lt;&lt;=1){128&amp;t&amp;&amp;(this.buffer[o+r*a]=1);do{s?o--:(o++,n?0!==a?a--:(n=!n,6===(o-=2)&amp;&amp;(o--,a=9)):a!==r-1?a++:(n=!n,6===(o-=2)&amp;&amp;(o--,a-=8))),s=!s}while(this._isMasked(o,a))}},_reverseMask:function(){var t,e,i=this.width;for(t=0;t&lt;9;t++)this._setMask(t,8);for(t=0;t&lt;8;t++)this._setMask(t+i-8,8),this._setMask(8,t);for(e=0;e&lt;7;e++)this._setMask(8,e+i-7)},_setMask:function(t,e){var i=v._getMaskBit(t,e);this._mask[i]=1},_syncMask:function(){var t,e,i=this.width;for(e=0;e&lt;i;e++)for(t=0;t&lt;=e;t++)this.buffer[t+i*e]&amp;&amp;this._setMask(t,e)}},{_createArray:function(t){var e,i=[];for(e=0;e&lt;t;e++)i[e]=0;return i},_getMaskBit:function(t,e){var i;return t&gt;e&amp;&amp;(i=t,t=e,e=i),i=e,i+=e*e,i&gt;&gt;=1,i+=t},_modN:function(t){for(;t&gt;=255;)t=((t-=255)&gt;&gt;8)+(255&amp;t);return t},N1:3,N2:3,N3:40,N4:10}),p=v,m=f.extend({draw:function(){this.element.src=this.qrious.toDataURL()},reset:function(){this.element.src=\"\"},resize:function(){var t=this.element;t.width=t.height=this.qrious.size}}),g=h.extend(function(t,e,i,n){this.name=t,this.modifiable=Boolean(e),this.defaultValue=i,this._valueTransformer=n},{transform:function(t){var e=this._valueTransformer;return\"function\"==typeof e?e(t,this):t}}),k=h.extend(null,{abs:function(t){return null!=t?Math.abs(t):null},hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},noop:function(){},toUpperCase:function(t){return null!=t?t.toUpperCase():null}}),w=h.extend(function(t){this.options={},t.forEach(function(t){this.options[t.name]=t},this)},{exists:function(t){return null!=this.options[t]},get:function(t,e){return w._get(this.options[t],e)},getAll:function(t){var e,i=this.options,n={};for(e in i)k.hasOwn(i,e)&amp;&amp;(n[e]=w._get(i[e],t));return n},init:function(t,e,i){\"function\"!=typeof i&amp;&amp;(i=k.noop);var n,s;for(n in this.options)k.hasOwn(this.options,n)&amp;&amp;(s=this.options[n],w._set(s,s.defaultValue,e),w._createAccessor(s,e,i));this._setAll(t,e,!0)},set:function(t,e,i){return this._set(t,e,i)},setAll:function(t,e){return this._setAll(t,e)},_set:function(t,e,i,n){var s=this.options[t];if(!s)throw new Error(\"Invalid option: \"+t);if(!s.modifiable&amp;&amp;!n)throw new Error(\"Option cannot be modified: \"+t);return w._set(s,e,i)},_setAll:function(t,e,i){if(!t)return!1;var n,s=!1;for(n in t)k.hasOwn(t,n)&amp;&amp;this._set(n,t[n],e,i)&amp;&amp;(s=!0);return s}},{_createAccessor:function(t,e,i){var n={get:function(){return w._get(t,e)}};t.modifiable&amp;&amp;(n.set=function(n){w._set(t,n,e)&amp;&amp;i(n,t)}),Object.defineProperty(e,t.name,n)},_get:function(t,e){return e[\"_\"+t.name]},_set:function(t,e,i){var n=\"_\"+t.name,s=i[n],r=t.transform(null!=e?e:t.defaultValue);return i[n]=r,r!==s}}),M=w,b=h.extend(function(){this._services={}},{getService:function(t){var e=this._services[t];if(!e)throw new Error(\"Service is not being managed with name: \"+t);return e},setService:function(t,e){if(this._services[t])throw new Error(\"Service is already managed with name: \"+t);e&amp;&amp;(this._services[t]=e)}}),B=new M([new g(\"background\",!0,\"white\"),new g(\"backgroundAlpha\",!0,1,k.abs),new g(\"element\"),new g(\"foreground\",!0,\"black\"),new g(\"foregroundAlpha\",!0,1,k.abs),new g(\"level\",!0,\"L\",k.toUpperCase),new g(\"mime\",!0,\"image/png\"),new g(\"padding\",!0,null,k.abs),new g(\"size\",!0,100,k.abs),new g(\"value\",!0,\"\")]),y=new b,O=h.extend(function(t){B.init(t,this,this.update.bind(this));var e=B.get(\"element\",this),i=y.getService(\"element\"),n=e&amp;&amp;i.isCanvas(e)?e:i.createCanvas(),s=e&amp;&amp;i.isImage(e)?e:i.createImage();this._canvasRenderer=new c(this,n,!0),this._imageRenderer=new m(this,s,s===e),this.update()},{get:function(){return B.getAll(this)},set:function(t){B.setAll(t,this)&amp;&amp;this.update()},toDataURL:function(t){return this.canvas.toDataURL(t||this.mime)},update:function(){var t=new p({level:this.level,value:this.value});this._canvasRenderer.render(t),this._imageRenderer.render(t)}},{use:function(t){y.setService(t.getName(),t)}});Object.defineProperties(O.prototype,{canvas:{get:function(){return this._canvasRenderer.getElement()}},image:{get:function(){return this._imageRenderer.getElement()}}});var A=O,L=h.extend({getName:function(){}}).extend({createCanvas:function(){},createImage:function(){},getName:function(){return\"element\"},isCanvas:function(t){},isImage:function(t){}}).extend({createCanvas:function(){return document.createElement(\"canvas\")},createImage:function(){return document.createElement(\"img\")},isCanvas:function(t){return t instanceof HTMLCanvasElement},isImage:function(t){return t instanceof HTMLImageElement}});return A.use(new L),A});\n\nfunction hex_to_b32(hex) { let alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\"; let bytes = []; for (let i = 0; i &lt; hex.length; i += 2) { bytes.push(parseInt(hex.substr(i, 2), 16)); } let bits = 0; let value = 0; let output = ''; for (let i = 0; i &lt; bytes.length; i++) { value = (value &lt;&lt; 8) | bytes[i]; bits += 8; while (bits &gt;= 5) { output += alphabet[(value &gt;&gt;&gt; (bits - 5)) &amp; 31]; bits -= 5; } } if (bits &gt; 0) { output += alphabet[(value &lt;&lt; (5 - bits)) &amp; 31]; } return output; }\n\nfunction console_image(url, size) { console.log(\"%c+\", \"font-size: 1px; padding: \" + Math.floor(size / 2) + \"px \" + Math.floor(size / 2) + \"px; line-height: \" + size + \"px; background: url(\" + url + \"); color: transparent;\"); }\n\n(function(console) { console.save = function(data, filename) { if (!data) { console.error('Console.save: No data'); return; } if (typeof data === \"object\") { data = JSON.stringify(data, undefined, 4) } var blob = new Blob([data], {type: 'text/json'}), e = document.createEvent('MouseEvents'), a = document.createElement('a'); a.download = filename; a.href = window.URL.createObjectURL(blob); a.dataset.downloadurl =  ['text/json', a.download, a.href].join(':'); e.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null); a.dispatchEvent(e); } })(console);\n\nconsole.warn(\"Here's your Authy tokens:\");\nvar data = appManager.getModel().map(function(i) {\n  var secret = (i.markedForDeletion === false ? i.decryptedSeed : hex_to_b32(i.secretSeed));\n  var period = (i.digits === 7 ? 10 : 30);\n  var totp_uri = `otpauth://totp/${encodeURIComponent(i.name)}?secret=${secret}&amp;digits=${i.digits}&amp;period=${period}`;\n  console.group(i.name); console.log('TOTP secret:', secret); console.log('TOTP URI:', totp_uri); var qr_size = 250; var url = (new QRious({value: totp_uri, size: qr_size})).toDataURL(); console_image(url, qr_size); console.groupEnd();\n  return {name: i.name, secret: secret, uri: totp_uri};\n});\n</code></pre>\n","last_modified":1631164460,"replies":7,"id":800801},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_large.png?m=1607656854","name":"macos","avatar_normal":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_normal.png?m=1607656854","title":"macOS","url":"https://www.v2ex.com/go/macos","topics":17031,"footer":"<a href=\"/mbp\">MacBook Pro</a> 及 <a href=\"/go/imac\">iMac</a> 等 <a href=\"/go/apple\">Apple</a> 公司设计的计算机所运行的操作系统。<a href=\"/go/idev\">iOS</a> 的基础。","header":"The world’s most advanced desktop operating system.","title_alternative":"macOS","avatar_mini":"https://cdn.v2ex.com/navatar/b6d7/67d2/22_mini.png?m=1607656854","stars":4388,"aliases":[],"root":false,"id":22,"parent_node_name":"os"},"member":{"username":"g001","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/8f0622e5687a54b9163e69ba6a1c9f14?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/g001","tagline":null,"twitter":null,"created":1605777590,"avatar_large":"https://cdn.v2ex.com/gravatar/8f0622e5687a54b9163e69ba6a1c9f14?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/8f0622e5687a54b9163e69ba6a1c9f14?s=24&d=retro","location":null,"btc":null,"id":518310},"last_reply_by":"wangshushu","last_touched":1631166564,"title":"为啥今天我的 macbook 看哔哩哔哩很卡，而且电脑快速发热","url":"https://www.v2ex.com/t/800787","created":1631158643,"content":"不看哔哩哔哩就没事，你们有这种情况吗","content_rendered":"<p>不看哔哩哔哩就没事，你们有这种情况吗</p>\n","last_modified":1631158643,"replies":7,"id":800787},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_large.png?m=1630652774","name":"career","avatar_normal":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_normal.png?m=1630652774","title":"职场话题","url":"https://www.v2ex.com/go/career","topics":12061,"footer":"","header":"这里，我们聊聊那些工作中遇到的开心和不开心的事。","title_alternative":"Career","avatar_mini":"https://cdn.v2ex.com/navatar/4ea0/6fbc/770_mini.png?m=1630652774","stars":2150,"aliases":[],"root":false,"id":770,"parent_node_name":"work"},"member":{"username":"Nightmares13","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/avatar/47f8/d045/363070_mini.png?m=1626237750","bio":null,"url":"https://www.v2ex.com/u/Nightmares13","tagline":null,"twitter":null,"created":1542173852,"avatar_large":"https://cdn.v2ex.com/avatar/47f8/d045/363070_mini.png?m=1626237750","avatar_mini":"https://cdn.v2ex.com/avatar/47f8/d045/363070_mini.png?m=1626237750","location":null,"btc":null,"id":363070},"last_reply_by":"shyrock","last_touched":1631168754,"title":"各个公司都开始 965 了，薪资降了吗？工作量减少了吗？","url":"https://www.v2ex.com/t/800800","created":1631164366,"content":"如果薪资降了，工作量还是原来那么多，时间从哪来啊","content_rendered":"<p>如果薪资降了，工作量还是原来那么多，时间从哪来啊</p>\n","last_modified":1631164366,"replies":6,"id":800800},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/8613/985e/90_large.png?m=1620107162","name":"python","avatar_normal":"https://cdn.v2ex.com/navatar/8613/985e/90_normal.png?m=1620107162","title":"Python","url":"https://www.v2ex.com/go/python","topics":14573,"footer":"","header":"这里讨论各种 Python 语言编程话题，也包括 Django，Tornado 等框架的讨论。这里是一个能够帮助你解决实际问题的地方。","title_alternative":"Python","avatar_mini":"https://cdn.v2ex.com/navatar/8613/985e/90_mini.png?m=1620107162","stars":9699,"aliases":[],"root":false,"id":90,"parent_node_name":"programming"},"member":{"username":"15399905591","website":null,"github":null,"psn":null,"avatar_normal":"https://cdn.v2ex.com/gravatar/878aba9e80817c569dcfe07df7fe1593?s=24&d=retro","bio":null,"url":"https://www.v2ex.com/u/15399905591","tagline":null,"twitter":null,"created":1496824423,"avatar_large":"https://cdn.v2ex.com/gravatar/878aba9e80817c569dcfe07df7fe1593?s=24&d=retro","avatar_mini":"https://cdn.v2ex.com/gravatar/878aba9e80817c569dcfe07df7fe1593?s=24&d=retro","location":null,"btc":null,"id":234415},"last_reply_by":"RRRoger","last_touched":1631165159,"title":"求个基于 DDD 的 flask 脚手架","url":"https://www.v2ex.com/t/800780","created":1631158125,"content":"对 DDD 的概念越了解越模糊， 看了一些基于 DDD 的资料，发现每个人对 DDD 的理解好像都不太样， 不知道有没有标准一些的基于 ddd 的脚手架","content_rendered":"对 DDD 的概念越了解越模糊， 看了一些基于 DDD 的资料，发现每个人对 DDD 的理解好像都不太样， 不知道有没有标准一些的基于 ddd 的脚手架","last_modified":1631158125,"replies":6,"id":800780}]