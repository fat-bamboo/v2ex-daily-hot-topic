[{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1650095340","name":"qna","avatar_normal":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_normal.png?m=1650095340","title":"问与答","url":"https://www.v2ex.com/go/qna","topics":195331,"footer":"","header":"一个更好的世界需要你持续地提出好问题。","title_alternative":"Questions and Answers","avatar_mini":"https://cdn.v2ex.com/navatar/c20a/d4d7/12_mini.png?m=1650095340","stars":3666,"aliases":[],"root":false,"id":12,"parent_node_name":"v2ex"},"member":{"id":188240,"username":"foreverstandbyu","url":"https://www.v2ex.com/u/foreverstandbyu","website":"","twitter":"foreverstandbyu","psn":"foreverstandbyu","github":"foreverstandbyu","btc":"foreverstandbyu","location":"おまえがいな","tagline":"","bio":"おまえがいない世界は、オレには暗すぎてなにも见えないんだよ。、","avatar_mini":"https://cdn.v2ex.com/avatar/4e36/51b2/188240_mini.png?m=1665480703","avatar_normal":"https://cdn.v2ex.com/avatar/4e36/51b2/188240_normal.png?m=1665480703","avatar_large":"https://cdn.v2ex.com/avatar/4e36/51b2/188240_large.png?m=1665480703","avatar_xlarge":"https://cdn.v2ex.com/avatar/4e36/51b2/188240_xlarge.png?m=1665480703","avatar_xxlarge":"https://cdn.v2ex.com/avatar/4e36/51b2/188240_xlarge.png?m=1665480703","avatar_xxxlarge":"https://cdn.v2ex.com/avatar/4e36/51b2/188240_xlarge.png?m=1665480703","created":1471854105,"last_modified":1665480703},"last_reply_by":"ajaxgoldfish","last_touched":1672627937,"title":"车开始烧机油之后是不是只能定期加机油了， 1.8T 的帕萨特 11 年的。","url":"https://www.v2ex.com/t/906004","created":1672620088,"deleted":0,"content":"哪里可以看到一些专业的汽车维护知识呀。\n感谢。","content_rendered":"哪里可以看到一些专业的汽车维护知识呀。<br />感谢。","last_modified":1672620088,"replies":7,"id":906004},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/3cef/96dc/949_large.png?m=1614702882","name":"nas","avatar_normal":"https://cdn.v2ex.com/navatar/3cef/96dc/949_normal.png?m=1614702882","title":"NAS","url":"https://www.v2ex.com/go/nas","topics":872,"footer":"","header":"关于网络存储设备的讨论","title_alternative":"NAS","avatar_mini":"https://cdn.v2ex.com/navatar/3cef/96dc/949_mini.png?m=1614702882","stars":1290,"aliases":[],"root":false,"id":949,"parent_node_name":"hardware"},"member":{"id":366776,"username":"Davic1","url":"https://www.v2ex.com/u/Davic1","website":"luozx.org","twitter":"","psn":"","github":"","btc":"","location":"","tagline":"","bio":"","avatar_mini":"https://cdn.v2ex.com/gravatar/e7ab009c39132b5338abae4423528447?s=24&d=retro","avatar_normal":"https://cdn.v2ex.com/gravatar/e7ab009c39132b5338abae4423528447?s=48&d=retro","avatar_large":"https://cdn.v2ex.com/gravatar/e7ab009c39132b5338abae4423528447?s=73&d=retro","created":1543538317,"last_modified":1666409447},"last_reply_by":"mhqschen","last_touched":1672627708,"title":"各位玩 PT 都用的啥盘啊？","url":"https://www.v2ex.com/t/906013","created":1672626257,"deleted":0,"content":"PT 新手， 现在手里有一个 QNAP-453Bmini （ 4 盘位） 目前只放了一块酷狼 4T. 现在快满了。\r\n\r\n这块盘上除了 PT 下载的数据之外也放了一些其他的个人数据。而且听说 PT 费盘，我这有几个疑问：\r\n\r\n1. 现在要买快新的硬盘来挂 PT ， 应该买多大容量 /什么品牌的盘好？\r\n2. 新硬盘只用来放 PT 的数据， 是不是要隔离使用？ 还是直接扩充的现有的存储池中？","content_rendered":"PT 新手， 现在手里有一个 QNAP-453Bmini （ 4 盘位） 目前只放了一块酷狼 4T. 现在快满了。<br /><br />这块盘上除了 PT 下载的数据之外也放了一些其他的个人数据。而且听说 PT 费盘，我这有几个疑问：<br /><br />1. 现在要买快新的硬盘来挂 PT ， 应该买多大容量 /什么品牌的盘好？<br />2. 新硬盘只用来放 PT 的数据， 是不是要隔离使用？ 还是直接扩充的现有的存储池中？","last_modified":1672626257,"replies":6,"id":906013},{"node":{"avatar_large":"https://cdn.v2ex.com/navatar/7f39/f831/61_large.png?m=1659331290","name":"mysql","avatar_normal":"https://cdn.v2ex.com/navatar/7f39/f831/61_normal.png?m=1659331290","title":"MySQL","url":"https://www.v2ex.com/go/mysql","topics":1797,"footer":"","header":"地球上最流行的关系数据库。被大量的互联网企业运用在网站项目中。具有非常丰富的生态系统。","title_alternative":"MySQL","avatar_mini":"https://cdn.v2ex.com/navatar/7f39/f831/61_mini.png?m=1659331290","stars":2089,"aliases":[],"root":false,"id":61,"parent_node_name":"db"},"member":{"id":254536,"username":"sunmoon1983","url":"https://www.v2ex.com/u/sunmoon1983","website":"http://iw3c.com","twitter":"","psn":"","github":"","btc":"","location":"","tagline":"","bio":"","avatar_mini":"https://cdn.v2ex.com/avatar/912f/cff7/254536_mini.png?m=1658753908","avatar_normal":"https://cdn.v2ex.com/avatar/912f/cff7/254536_normal.png?m=1658753908","avatar_large":"https://cdn.v2ex.com/avatar/912f/cff7/254536_large.png?m=1658753908","created":1505461098,"last_modified":1658753908},"last_reply_by":"BugCry","last_touched":1672627822,"title":"求各位大佬给些报表优化的思路?","url":"https://www.v2ex.com/t/906010","created":1672623959,"deleted":0,"content":"现在客户要求这么一张报表\r\n![]( https://tvax3.sinaimg.cn/large/005S7MDjly1h91185f999j31p20vrwjl.jpg)\r\n横向为年龄\r\n竖向为项目名称\r\n有各种条件每次客户进入页面都要点击一下开始分析，报表生成起来很慢，现在要求优化，加上了缓存，但是第一次生成报表的时候还是需要等待，想用计划任务跑一下，但是想到了各种搜索条件组合起来有很多情况，没有实施，求优化思路！\r\n\r\n当前表结构\r\n```sql\r\nCREATE TABLE `xx_table1` (\r\n  `id` bigint NOT NULL,\r\n  `code` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '编号',\r\n  `full_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '姓名',\r\n  `gender` tinyint NOT NULL DEFAULT '0' COMMENT '性别',\r\n  `age` smallint DEFAULT '0' COMMENT '年龄',\r\n  `idcard` varchar(33) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '身份证号',\r\n  `resident_address` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '常驻地址',\r\n  `resident_address_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '常驻地址行政编码',\r\n  `registered_address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '户籍地址',\r\n  `registered_address_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '户籍地址行政编码',\r\n  `birthday` date DEFAULT '0000-00-00' COMMENT '生日',\r\n  `dead_date` datetime DEFAULT NULL COMMENT '死亡日期',\r\n  `dead_place_code` bigint NOT NULL DEFAULT '0' COMMENT '死亡地点',\r\n  `family_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '家属姓名',\r\n  `family_tel` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '家属联系电话',\r\n  `created_at` datetime DEFAULT NULL COMMENT '创建时间',\r\n  `created_by` bigint NOT NULL COMMENT '创建人',\r\n  `is_audit` tinyint NOT NULL DEFAULT '1' COMMENT '是否审核',\r\n  `audit_by` bigint DEFAULT NULL COMMENT '审核人',\r\n  `audit_at` datetime DEFAULT NULL COMMENT '审核时间',\r\n  `year` int NOT NULL DEFAULT '0' COMMENT '年份',\r\n  `item_id` int NOT NULL DEFAULT '0' COMMENT '项目 id',\r\n  `area_code` bigint DEFAULT '0' COMMENT '地区代码',\r\n  PRIMARY KEY (`id`) USING BTREE,\r\n  KEY `p_fi_idx` (`full_name`,`idcard`) USING BTREE\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=DYNAMIC COMMENT='XX 表';\r\n```\r\n索引还没加\r\n\r\n数据量大于 100W!\r\n\r\n想到了把数据跑成单表，但是没做过，不知道要怎么写，不知道单表要怎么建，求大老指点","content_rendered":"<p>现在客户要求这么一张报表\n<img alt=\"\" class=\"embedded_image\" loading=\"lazy\" referrerpolicy=\"no-referrer\" rel=\"noreferrer\" src=\"https://tvax3.sinaimg.cn/large/005S7MDjly1h91185f999j31p20vrwjl.jpg\"/>\n横向为年龄\n竖向为项目名称\n有各种条件每次客户进入页面都要点击一下开始分析，报表生成起来很慢，现在要求优化，加上了缓存，但是第一次生成报表的时候还是需要等待，想用计划任务跑一下，但是想到了各种搜索条件组合起来有很多情况，没有实施，求优化思路！</p>\n<p>当前表结构</p>\n<pre><code class=\"language-sql\">CREATE TABLE `xx_table1` (\n  `id` bigint NOT NULL,\n  `code` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '编号',\n  `full_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '姓名',\n  `gender` tinyint NOT NULL DEFAULT '0' COMMENT '性别',\n  `age` smallint DEFAULT '0' COMMENT '年龄',\n  `idcard` varchar(33) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT '' COMMENT '身份证号',\n  `resident_address` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '常驻地址',\n  `resident_address_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '常驻地址行政编码',\n  `registered_address` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '户籍地址',\n  `registered_address_code` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '户籍地址行政编码',\n  `birthday` date DEFAULT '0000-00-00' COMMENT '生日',\n  `dead_date` datetime DEFAULT NULL COMMENT '死亡日期',\n  `dead_place_code` bigint NOT NULL DEFAULT '0' COMMENT '死亡地点',\n  `family_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '家属姓名',\n  `family_tel` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL COMMENT '家属联系电话',\n  `created_at` datetime DEFAULT NULL COMMENT '创建时间',\n  `created_by` bigint NOT NULL COMMENT '创建人',\n  `is_audit` tinyint NOT NULL DEFAULT '1' COMMENT '是否审核',\n  `audit_by` bigint DEFAULT NULL COMMENT '审核人',\n  `audit_at` datetime DEFAULT NULL COMMENT '审核时间',\n  `year` int NOT NULL DEFAULT '0' COMMENT '年份',\n  `item_id` int NOT NULL DEFAULT '0' COMMENT '项目 id',\n  `area_code` bigint DEFAULT '0' COMMENT '地区代码',\n  PRIMARY KEY (`id`) USING BTREE,\n  KEY `p_fi_idx` (`full_name`,`idcard`) USING BTREE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=DYNAMIC COMMENT='XX 表';\n</code></pre>\n<p>索引还没加</p>\n<p>数据量大于 100W!</p>\n<p>想到了把数据跑成单表，但是没做过，不知道要怎么写，不知道单表要怎么建，求大老指点</p>\n","last_modified":1672623959,"replies":6,"id":906010}]